\hypertarget{main_8cpp}{\section{Référence du fichier main.\-cpp}
\label{main_8cpp}\index{main.\-cpp@{main.\-cpp}}
}
{\ttfamily \#include $<$Qt\-Widgets/\-Q\-Application$>$}\\*
{\ttfamily \#include $<$Qt\-Qml$>$}\\*
{\ttfamily \#include $<$Qt\-Quick$>$}\\*
{\ttfamily \#include $<$Q\-Progress\-Dialog$>$}\\*
{\ttfamily \#include \char`\"{}S\-H\-\_\-\-Message\-Manager.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}S\-H\-\_\-\-Application\-Core.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}models/\-S\-H\-\_\-\-Extended\-Sql\-Proxy\-Model.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}models/\-S\-H\-\_\-\-Rooms\-Table\-Model.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}models/\-S\-H\-\_\-\-Sql\-Data\-Field.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}models/\-S\-H\-\_\-\-Billings\-Table\-Model.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}models/\-S\-H\-\_\-\-Bills\-Table\-Model.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}models/\-S\-H\-\_\-\-Bookings\-Table\-Model.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}models/\-S\-H\-\_\-\-Clients\-Table\-Model.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}models/\-S\-H\-\_\-\-Services\-Table\-Model.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}models/\-S\-H\-\_\-\-Groups\-Table\-Model.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}models/\-S\-H\-\_\-\-User.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}views/\-S\-H\-\_\-\-Extended\-Q\-Qml\-Action.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}logging/\-Qs\-Log.\-h\char`\"{}}\\*
{\ttfamily \#include \char`\"{}logging/\-Qs\-Log\-Dest.\-h\char`\"{}}\\*
Graphe des dépendances par inclusion de main.\-cpp\-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{main_8cpp__incl}
\end{center}
\end{figure}
\subsection*{Fonctions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{main_8cpp_ac3c79e35c4fc5c50939ae90485e1483f}{enable\-Logging} (const Q\-String s\-Log\-Path)
\item 
void \hyperlink{main_8cpp_a5e94203dceafb66df570cbbc79cb52bc}{exportlog} (Qt\-Msg\-Type type, const Q\-Message\-Log\-Context \&context, const Q\-String \&msg)
\item 
int \hyperlink{main_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main} (int argc, char $\ast$$\ast$argv)
\item 
void \hyperlink{main_8cpp_ae410a0b90b40ede93034f3ec13d27b8e}{spin} (int \&iteration)
\item 
void \hyperlink{main_8cpp_aaf7c4666a49fc2890c12b6ae393b8deb}{status\-Changed} (Q\-Qml\-Component $\ast$component, Q\-Qml\-Component\-::\-Status status)
\end{DoxyCompactItemize}
\subsection*{Variables}
\begin{DoxyCompactItemize}
\item 
const int \hyperlink{main_8cpp_aab83ac6564fd72e82c62b21733ca0e1b}{iterations} = 20
\end{DoxyCompactItemize}


\subsection{Documentation des fonctions}
\hypertarget{main_8cpp_ac3c79e35c4fc5c50939ae90485e1483f}{\index{main.\-cpp@{main.\-cpp}!enable\-Logging@{enable\-Logging}}
\index{enable\-Logging@{enable\-Logging}!main.cpp@{main.\-cpp}}
\subsubsection[{enable\-Logging}]{\setlength{\rightskip}{0pt plus 5cm}void enable\-Logging (
\begin{DoxyParamCaption}
\item[{const Q\-String}]{s\-Log\-Path}
\end{DoxyParamCaption}
)}}\label{main_8cpp_ac3c79e35c4fc5c50939ae90485e1483f}
enable\-Logging 
\begin{DoxyParams}{Paramètres}
{\em s\-Log\-Path} & \\
\hline
\end{DoxyParams}


Définition à la ligne \hyperlink{main_8cpp_source_l00071}{71} du fichier \hyperlink{main_8cpp_source}{main.\-cpp}.



Référencé par \hyperlink{main_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main()}.


\begin{DoxyCode}
00072 \{
00073     \textcolor{comment}{/* init the logging mechanism*/}
00074     QsLogging::Logger& logger = QsLogging::Logger::instance();
00075     logger.setLoggingLevel(QsLogging::TraceLevel);
00076 
00077     QsLogging::DestinationPtr fileDestination(
00078                 QsLogging::DestinationFactory::MakeFileDestination(sLogPath, \textcolor{keyword}{true}, 512, 2) );
00079     QsLogging::DestinationPtr debugDestination(
00080                 QsLogging::DestinationFactory::MakeDebugOutputDestination() );
00081     logger.addDestination(debugDestination);
00082     logger.addDestination(fileDestination);
00083 
00084     logger.setLoggingLevel(QsLogging::OffLevel); \textcolor{comment}{/*truning logging off*/}
00085 
00086 
00087     \textcolor{comment}{/*qInstallMessageHandler(exportlog);*/}
00088 
00089     \textcolor{comment}{/* QLOG\_INFO() << "Here is some information";}
00090 \textcolor{comment}{}
00091 \textcolor{comment}{        QLOG\_TRACE() << "Here's a" << QString::fromUtf8("trace") << "message";}
00092 \textcolor{comment}{        QLOG\_DEBUG() << "Here's a" << static\_cast<int>(QsLogging::DebugLevel) << "message";}
00093 \textcolor{comment}{        QLOG\_WARN()  << "Uh-oh!";}
00094 \textcolor{comment}{        qDebug() << "This message won't be picked up by the logger";}
00095 \textcolor{comment}{        QLOG\_ERROR() << "An example error has occurred";}
00096 \textcolor{comment}{        qWarning() << "Neither will this one";}
00097 \textcolor{comment}{        QLOG\_FATAL() << "Fatal error example!";*/}
00098 \}
\end{DoxyCode}


Voici le graphe des appelants de cette fonction \-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=256pt]{main_8cpp_ac3c79e35c4fc5c50939ae90485e1483f_icgraph}
\end{center}
\end{figure}


\hypertarget{main_8cpp_a5e94203dceafb66df570cbbc79cb52bc}{\index{main.\-cpp@{main.\-cpp}!exportlog@{exportlog}}
\index{exportlog@{exportlog}!main.cpp@{main.\-cpp}}
\subsubsection[{exportlog}]{\setlength{\rightskip}{0pt plus 5cm}void exportlog (
\begin{DoxyParamCaption}
\item[{Qt\-Msg\-Type}]{type, }
\item[{const Q\-Message\-Log\-Context \&}]{context, }
\item[{const Q\-String \&}]{msg}
\end{DoxyParamCaption}
)}}\label{main_8cpp_a5e94203dceafb66df570cbbc79cb52bc}


Définition à la ligne \hyperlink{main_8cpp_source_l00046}{46} du fichier \hyperlink{main_8cpp_source}{main.\-cpp}.


\begin{DoxyCode}
00046                                                                                       \{
00047     QFile file(QApplication::applicationDirPath()+\textcolor{stringliteral}{"/"}+qAppName()+\textcolor{stringliteral}{".log"});
00048     file.open(QIODevice::WriteOnly | QIODevice::Append);
00049     file.write(QString(\textcolor{stringliteral}{"["}).toUtf8()+QDateTime::currentDateTime().toString().toUtf8()+QString(\textcolor{stringliteral}{"] "}).toUtf8(
      ));
00050     QString typeName;
00051     \textcolor{keywordflow}{switch} (type) \{
00052     \textcolor{keywordflow}{case} QtDebugMsg:
00053         typeName = QObject::tr(\textcolor{stringliteral}{"Debug"});
00054         \textcolor{keywordflow}{break};
00055     \textcolor{keywordflow}{case} QtWarningMsg:
00056         typeName = QObject::tr(\textcolor{stringliteral}{"Warning"});
00057         \textcolor{keywordflow}{break};
00058     \}
00059     file.write(QObject::tr(\textcolor{stringliteral}{"%1: %2\(\backslash\)r\(\backslash\)n"}).arg(typeName).arg(msg).toUtf8());
00060 \}
\end{DoxyCode}
\hypertarget{main_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{\index{main.\-cpp@{main.\-cpp}!main@{main}}
\index{main@{main}!main.cpp@{main.\-cpp}}
\subsubsection[{main}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{argc, }
\item[{char $\ast$$\ast$}]{argv}
\end{DoxyParamCaption}
)}}\label{main_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}


Définition à la ligne \hyperlink{main_8cpp_source_l00125}{125} du fichier \hyperlink{main_8cpp_source}{main.\-cpp}.



Références \hyperlink{main_8cpp_ac3c79e35c4fc5c50939ae90485e1483f}{enable\-Logging()}, et \hyperlink{classSH__MessageManager_acb5615cc90f198f4768da800a5d32362}{S\-H\-\_\-\-Message\-Manager\-::error\-Message()}.


\begin{DoxyCode}
00126 \{
00127     \textcolor{keywordflow}{try}
00128     \{
00129         qDebug();  \textcolor{comment}{/* Un simple retour à la ligne pour un affichage propre dans la console*/}
00130 
00131         QApplication app(argc, argv);
00132 
00133         \textcolor{keyword}{const} QString sLogPath(QDir::cleanPath(app.applicationDirPath()+\textcolor{stringliteral}{"
      /../../../src/PreCheck/debugLog.txt"}));
00134         qDebug() << app.applicationDirPath();
00135         qDebug() << QDir::cleanPath(app.applicationDirPath()+\textcolor{stringliteral}{"/../../../src/PreCheck/debugLog.txt"});
00136         \hyperlink{main_8cpp_ac3c79e35c4fc5c50939ae90485e1483f}{enableLogging}(sLogPath);
00137 
00138         QString appName = QString(QObject::tr(\textcolor{stringliteral}{"precheck"}));
00139         QString locale = QLocale::system().name();
00140         QTranslator translator;
00141         \textcolor{keywordflow}{if} (!QFile::exists(appName + \textcolor{stringliteral}{"\_"} + locale + \textcolor{stringliteral}{".qm"}))
00142         \{
00143             locale = locale.section(\textcolor{charliteral}{'\_'}, 0, 0);
00144         \}
00145         \textcolor{keywordflow}{if} (QFile::exists(appName + \textcolor{stringliteral}{"\_"} + locale + \textcolor{stringliteral}{".qm"}))
00146         \{
00147             translator.load(appName + \textcolor{stringliteral}{"\_"} + locale);
00148             app.installTranslator(&translator);
00149         \}
00150 
00151         QQmlEngine engine;
00152 
00153         qmlRegisterUncreatableType<SH\_ApplicationCore>(\textcolor{stringliteral}{"PreCheck"}, 1, 0, \textcolor{stringliteral}{"AppMode"},\textcolor{stringliteral}{"pour enum AppMode"});
00154         qmlRegisterType<SH\_User>(\textcolor{stringliteral}{"PreCheck"}, 1, 0, \textcolor{stringliteral}{"User"});
00155         \hyperlink{classSH__ApplicationCore}{SH\_ApplicationCore}* appManager = \textcolor{keyword}{new} 
      \hyperlink{classSH__ApplicationCore}{SH\_ApplicationCore}();
00156         engine.rootContext()->setContextProperty(\textcolor{stringliteral}{"SH\_App"}, appManager);
00157 
00158         qmlRegisterType<SH\_RoomsTableModel>(\textcolor{stringliteral}{"PreCheck"}, 1, 0, \textcolor{stringliteral}{"SH\_RoomsModel"});
00159         qmlRegisterType<SH\_BillingsTableModel>(\textcolor{stringliteral}{"PreCheck"}, 1, 0, \textcolor{stringliteral}{"SH\_BillingsModel"});
00160         qmlRegisterType<SH\_BillsTableModel>(\textcolor{stringliteral}{"PreCheck"}, 1, 0, \textcolor{stringliteral}{"SH\_BillsModel"});
00161         qmlRegisterType<SH\_BookingsTableModel>(\textcolor{stringliteral}{"PreCheck"}, 1, 0, \textcolor{stringliteral}{"SH\_BookingsModel"});
00162         qmlRegisterType<SH\_ServicesTableModel>(\textcolor{stringliteral}{"PreCheck"}, 1, 0, \textcolor{stringliteral}{"SH\_ServicesModel"});
00163         qmlRegisterType<SH\_ClientsTableModel>(\textcolor{stringliteral}{"PreCheck"}, 1, 0, \textcolor{stringliteral}{"SH\_ClientsModel"});
00164         qmlRegisterType<SH\_GroupsTableModel>(\textcolor{stringliteral}{"PreCheck"}, 1, 0, \textcolor{stringliteral}{"SH\_GroupsModel"});
00165         qmlRegisterType<SH\_SqlDataFields>(\textcolor{stringliteral}{"PreCheck"}, 1, 0, \textcolor{stringliteral}{"SH\_SqlDataField"});
00166         qmlRegisterType<SH\_ExtendedQQmlAction>(\textcolor{stringliteral}{"PreCheck"}, 1, 0, \textcolor{stringliteral}{"SH\_ComplexAction"});
00167 
00168         QQmlComponent component(&engine);
00169         component.loadUrl(QUrl(\textcolor{stringliteral}{"qrc:/qml/SH\_app.qml"}));
00170         \textcolor{keywordflow}{if} (!component.isReady())
00171         \{
00172             qWarning(\textcolor{stringliteral}{"%s"}, qPrintable(component.errorString()));
00173             \textcolor{keywordflow}{return} -1;
00174         \}
00175         \hyperlink{classQObject}{QObject} *topLevel = component.create();
00176         QQuickWindow *window = qobject\_cast<QQuickWindow *>(topLevel);
00177         \textcolor{keywordflow}{if} (!window)
00178         \{
00179             qWarning(\textcolor{stringliteral}{"Error: Your root item has to be a Window."});
00180             \textcolor{keywordflow}{return} -1;
00181         \}
00182         QObject::connect(&engine, SIGNAL(quit()), &app, SLOT(quit()));
00183 
00184 
00185         \hyperlink{classQObject}{QObject} * commonPage = window->findChild<\hyperlink{classQObject}{QObject} *>(\textcolor{stringliteral}{"Common"});
00186         \hyperlink{classQObject}{QObject} * tabsZone = commonPage->findChild<\hyperlink{classQObject}{QObject} *>(\textcolor{stringliteral}{"TabView"});
00187         \hyperlink{classQObject}{QObject} * displayZone = commonPage->findChild<\hyperlink{classQObject}{QObject} *>(\textcolor{stringliteral}{"RightOutput"});
00188 
00189         QObject::connect(appManager, SIGNAL(openTab(QVariant)), tabsZone, SLOT(openTab(QVariant)), 
      Qt::DirectConnection);
00190         QObject::connect(appManager, SIGNAL(sendText(QString)), displayZone, SIGNAL(displayNewFixed(QString
      )), Qt::DirectConnection);
00191         QObject::connect(appManager, SIGNAL(sendText(QString)), displayZone, SIGNAL(replace(QString)), 
      Qt::DirectConnection);
00192         QObject::connect(appManager, SIGNAL(clearAll()), displayZone, SLOT(clearAll()), 
      Qt::QueuedConnection);
00193         \textcolor{comment}{/*QObject::connect(appManager, SIGNAL(displayCalendar()), displayZone, SLOT(displayCalendar()),
       Qt::DirectConnection);*/}
00194 
00195         window->show();
00196         QLOG\_INFO() << \textcolor{stringliteral}{"Program built with Qt"} << QT\_VERSION\_STR << \textcolor{stringliteral}{"running on"} << qVersion();
00197         \textcolor{keywordflow}{return} app.exec();
00198 
00199     \}
00200     \textcolor{keywordflow}{catch} (\textcolor{keyword}{const} std::exception &e)
00201     \{
00202         \hyperlink{classSH__MessageManager_acb5615cc90f198f4768da800a5d32362}{SH\_MessageManager::errorMessage}(e.what());
00203     \}
00204 \}
\end{DoxyCode}


Voici le graphe d'appel pour cette fonction \-:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=304pt]{main_8cpp_a3c04138a5bfe5d72780bb7e82a18e627_cgraph}
\end{center}
\end{figure}


\hypertarget{main_8cpp_ae410a0b90b40ede93034f3ec13d27b8e}{\index{main.\-cpp@{main.\-cpp}!spin@{spin}}
\index{spin@{spin}!main.cpp@{main.\-cpp}}
\subsubsection[{spin}]{\setlength{\rightskip}{0pt plus 5cm}void spin (
\begin{DoxyParamCaption}
\item[{int \&}]{iteration}
\end{DoxyParamCaption}
)}}\label{main_8cpp_ae410a0b90b40ede93034f3ec13d27b8e}


Définition à la ligne \hyperlink{main_8cpp_source_l00108}{108} du fichier \hyperlink{main_8cpp_source}{main.\-cpp}.


\begin{DoxyCode}
00109 \{
00110     \textcolor{keyword}{const} \textcolor{keywordtype}{int} work = 1000 * 1000 * 40;
00111     \textcolor{keyword}{volatile} \textcolor{keywordtype}{int} v = 0;
00112     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < work; ++j)
00113         ++v;
00114 
00115     qDebug() << \textcolor{stringliteral}{"iteration"} << iteration << \textcolor{stringliteral}{"in thread"} << QThread::currentThreadId();
00116 \}
\end{DoxyCode}
\hypertarget{main_8cpp_aaf7c4666a49fc2890c12b6ae393b8deb}{\index{main.\-cpp@{main.\-cpp}!status\-Changed@{status\-Changed}}
\index{status\-Changed@{status\-Changed}!main.cpp@{main.\-cpp}}
\subsubsection[{status\-Changed}]{\setlength{\rightskip}{0pt plus 5cm}void status\-Changed (
\begin{DoxyParamCaption}
\item[{Q\-Qml\-Component $\ast$}]{component, }
\item[{Q\-Qml\-Component\-::\-Status}]{status}
\end{DoxyParamCaption}
)}}\label{main_8cpp_aaf7c4666a49fc2890c12b6ae393b8deb}


Définition à la ligne \hyperlink{main_8cpp_source_l00031}{31} du fichier \hyperlink{main_8cpp_source}{main.\-cpp}.


\begin{DoxyCode}
00031                                                                          \{
00032     \textcolor{keywordflow}{if} (status == QQmlComponent::Error) \{
00033         \textcolor{keywordflow}{foreach} (\textcolor{keyword}{const} QQmlError &error, component->errors()) \{
00034             \textcolor{keyword}{const} QByteArray file = error.url().toEncoded();
00035             QMessageLogger(file.constData(), error.line(), 0).debug() << error.description();
00036         \}
00037     \}
00038 \}
\end{DoxyCode}


\subsection{Documentation des variables}
\hypertarget{main_8cpp_aab83ac6564fd72e82c62b21733ca0e1b}{\index{main.\-cpp@{main.\-cpp}!iterations@{iterations}}
\index{iterations@{iterations}!main.cpp@{main.\-cpp}}
\subsubsection[{iterations}]{\setlength{\rightskip}{0pt plus 5cm}const int iterations = 20}}\label{main_8cpp_aab83ac6564fd72e82c62b21733ca0e1b}


Définition à la ligne \hyperlink{main_8cpp_source_l00023}{23} du fichier \hyperlink{main_8cpp_source}{main.\-cpp}.

