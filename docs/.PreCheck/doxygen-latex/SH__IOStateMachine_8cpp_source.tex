\hypertarget{SH__IOStateMachine_8cpp}{\section{S\-H\-\_\-\-I\-O\-State\-Machine.\-cpp}
\label{SH__IOStateMachine_8cpp}\index{logic/\-S\-H\-\_\-\-I\-O\-State\-Machine.\-cpp@{logic/\-S\-H\-\_\-\-I\-O\-State\-Machine.\-cpp}}
}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#include "\hyperlink{SH__IOStateMachine_8h}{SH\_IOStateMachine.h}"}
00002 \textcolor{preprocessor}{#include "\hyperlink{SH__ValidationState_8h}{SH\_ValidationState.h}"}
00003 \textcolor{preprocessor}{#include "\hyperlink{SH__ConfirmationState_8h}{SH\_ConfirmationState.h}"}
00004 \textcolor{preprocessor}{#include "\hyperlink{SH__FileSelectionState_8h}{SH\_FileSelectionState.h}"}
00005 \textcolor{preprocessor}{#include "\hyperlink{SH__DateQuestionState_8h}{SH\_DateQuestionState.h}"}
00006 \textcolor{preprocessor}{#include "\hyperlink{SH__AdaptDatabaseState_8h}{SH\_AdaptDatabaseState.h}"}
00007 
\hypertarget{SH__IOStateMachine_8cpp_source_l00014}{}\hyperlink{classSH__InOutStateMachine_abd780037922920c674b43d80c2b50d16}{00014} \hyperlink{classSH__InOutStateMachine_abd780037922920c674b43d80c2b50d16}{SH\_InOutStateMachine::SH\_InOutStateMachine}(QString tableName, 
      QString name, \hyperlink{classQObject}{QObject} *parent) :
00015     \hyperlink{classQStateMachine}{QStateMachine}(parent), \hyperlink{classSH__NamedObject}{SH\_NamedObject}(name), m\_tableName(tableName)
00016 \{
00017     qDebug() << \textcolor{stringliteral}{"nouvelle IOStateMachine"};
00018 \}
00019 
\hypertarget{SH__IOStateMachine_8cpp_source_l00026}{}\hyperlink{classSH__InOutStateMachine_a60ecd7de03d948e2d1e9cbedb5c3e5fa}{00026} QString \hyperlink{classSH__InOutStateMachine_a60ecd7de03d948e2d1e9cbedb5c3e5fa}{SH\_InOutStateMachine::toString}()
00027 \{
00028     \hyperlink{classQObject}{QObject}* parent = this->parent();
00029     \hyperlink{classSH__GenericState}{SH\_GenericState}* par = qobject\_cast<\hyperlink{classSH__GenericState}{SH\_GenericState} *>(parent);
00030     \textcolor{keywordflow}{if}(par) \{
00031         \textcolor{keywordflow}{return} \hyperlink{classSH__NamedObject_af73e97f6476ca1ef3a22b159d179f5e7}{SH\_NamedObject::toString}()+ \textcolor{stringliteral}{" [descending from "}+par->
      \hyperlink{classSH__GenericState_a5480c5ee725fd801d8f6292cd4c803b8}{toString}()+\textcolor{stringliteral}{"] "};
00032     \} \textcolor{keywordflow}{else} \{
00033         \textcolor{keywordflow}{return} \hyperlink{classSH__NamedObject_af73e97f6476ca1ef3a22b159d179f5e7}{SH\_NamedObject::toString}();
00034     \}
00035 \}
00036 
\hypertarget{SH__IOStateMachine_8cpp_source_l00043}{}\hyperlink{classSH__InOutStateMachine_a79b456cb2e353cb61ef9fe19c97fc8fb}{00043} QVariantMap \hyperlink{classSH__InOutStateMachine_a79b456cb2e353cb61ef9fe19c97fc8fb}{SH\_InOutStateMachine::ioContent}()\textcolor{keyword}{ const}
00044 \textcolor{keyword}{}\{
00045     \textcolor{keywordflow}{return} \hyperlink{classSH__InOutStateMachine_a661a1c7bd3b1086b3b5cd60ca957ecbd}{m\_ioContent};
00046 \}
00047 
\hypertarget{SH__IOStateMachine_8cpp_source_l00054}{}\hyperlink{classSH__InOutStateMachine_a23a925522339132a51d16a7cff9074b9}{00054} \textcolor{keywordtype}{void} \hyperlink{classSH__InOutStateMachine_a23a925522339132a51d16a7cff9074b9}{SH\_InOutStateMachine::setIOcontent}(\textcolor{keyword}{const} QVariantMap &ioContent)
00055 \{
00056     \hyperlink{classSH__InOutStateMachine_a661a1c7bd3b1086b3b5cd60ca957ecbd}{m\_ioContent} = \hyperlink{classSH__InOutStateMachine_a79b456cb2e353cb61ef9fe19c97fc8fb}{ioContent};
00057 \}
00058 
\hypertarget{SH__IOStateMachine_8cpp_source_l00065}{}\hyperlink{classSH__InOutStateMachine_a2cdd914f1e597ac52d021106eec75c89}{00065} QVariant \hyperlink{classSH__InOutStateMachine_a2cdd914f1e597ac52d021106eec75c89}{SH\_InOutStateMachine::getContentValue}(QString field)
00066 \{
00067     \textcolor{keywordflow}{return} \hyperlink{classSH__InOutStateMachine_a661a1c7bd3b1086b3b5cd60ca957ecbd}{m\_ioContent}.value(field);
00068 \}
00069 
\hypertarget{SH__IOStateMachine_8cpp_source_l00076}{}\hyperlink{classSH__InOutStateMachine_a18b07a985695100612bbcbda870933b4}{00076} QString \hyperlink{classSH__InOutStateMachine_a18b07a985695100612bbcbda870933b4}{SH\_InOutStateMachine::tableName}()\textcolor{keyword}{ const}
00077 \textcolor{keyword}{}\{
00078     \textcolor{keywordflow}{return} \hyperlink{classSH__InOutStateMachine_acc0f5d5133af2dcca30939f53ec8837b}{m\_tableName};
00079 \}
00080 
\hypertarget{SH__IOStateMachine_8cpp_source_l00087}{}\hyperlink{classSH__InOutStateMachine_a437a730d07ddd15bd96314ab0b6cf40e}{00087} \textcolor{keywordtype}{void} \hyperlink{classSH__InOutStateMachine_a437a730d07ddd15bd96314ab0b6cf40e}{SH\_InOutStateMachine::setTableName}(\textcolor{keyword}{const} QString &tableName)
00088 \{
00089     \hyperlink{classSH__InOutStateMachine_acc0f5d5133af2dcca30939f53ec8837b}{m\_tableName} = \hyperlink{classSH__InOutStateMachine_a18b07a985695100612bbcbda870933b4}{tableName};
00090 \}
00091 
00092 
\hypertarget{SH__IOStateMachine_8cpp_source_l00099}{}\hyperlink{classSH__InOutStateMachine_aa2766b7a7ba39c35a10df7fc0c151b4f}{00099} \textcolor{keywordtype}{void} \hyperlink{classSH__InOutStateMachine_aa2766b7a7ba39c35a10df7fc0c151b4f}{SH\_InOutStateMachine::setContentValue}(QVariant content, QString 
      field)
00100 \{
00101     \hyperlink{classSH__InOutStateMachine_a661a1c7bd3b1086b3b5cd60ca957ecbd}{m\_ioContent}.insert(field, content);
00102 \}
00103 
\hypertarget{SH__IOStateMachine_8cpp_source_l00110}{}\hyperlink{classSH__InOutStateMachine_ad6b778d052f741daee720c047059ce0e}{00110} \textcolor{keywordtype}{void} \hyperlink{classSH__InOutStateMachine_ad6b778d052f741daee720c047059ce0e}{SH\_InOutStateMachine::addIOState}(
      \hyperlink{classSH__InOutState}{SH\_InOutState} *state, QString field)
00111 \{
00112     \textcolor{comment}{/*à faire au moment de l'entrée dans l'état state*/}
00113     connect(state, &QState::entered, [=]() \{
00114         qDebug() << \textcolor{stringliteral}{"entered !"};
00115         state->\hyperlink{classSH__InOutState_a918e8a7f5fe00dc16004e46eeee1281d}{display}(\textcolor{keyword}{true});
00116         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_ab224e4a6ab99c15770bc63e1b8fdb771}{SH\_InOutStateMachine::receiveInput}, state, &
      \hyperlink{classSH__InOutState_a0206ab7d5616f28b0da7bfd5451614e8}{SH\_InOutState::setInput}); \textcolor{comment}{/* la réception d'une valeur entraîne son enregistrement
       comme entrée de l'utilisateur auprès de l'état*/}
00117         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_ab224e4a6ab99c15770bc63e1b8fdb771}{SH\_InOutStateMachine::receiveInput}, [=](QString in
      )\{ qDebug() << \textcolor{stringliteral}{"hello world !"}; state->\hyperlink{classSH__InOutState_a0206ab7d5616f28b0da7bfd5451614e8}{setInput}(in);\}); \textcolor{comment}{/* la réception d'une valeur entraîne son
       enregistrement comme entrée de l'utilisateur auprès de l'état*/}
00118         connect(state, &\hyperlink{classSH__InOutState_ad40e929a5537eb1d4883d5aa6eee5b15}{SH\_InOutState::sendOutput}, [=](QVariant out) \{qDebug() << \textcolor{stringliteral}{
      "connected !"}; emit this->\hyperlink{classSH__InOutStateMachine_ae2cbbe3cd207158668dcb4838938c7ad}{sendText}(out.toString(), \textcolor{keyword}{false});\});
00119         connect(state, &\hyperlink{classSH__InOutState_afa791181eb61a18d4337a04827f9b200}{SH\_InOutState::resendInput}, [=](QVariant in) \{emit this->
      \hyperlink{classSH__InOutStateMachine_a526822c66b46aa0cd81ba4473fa5573f}{resendText}(in.toString(), \textcolor{keyword}{true});\});
00120         \textcolor{keywordflow}{if}(state->\hyperlink{classSH__InOutState_a8c496b2fe21a51a587c6e4409c0f37ec}{visibility}()) \{
00121             state->\hyperlink{classSH__InOutState_ad40e929a5537eb1d4883d5aa6eee5b15}{sendOutput}(QVariant(state->\hyperlink{classSH__InOutState_a1a2fd4f34484125058e20730aaee7e46}{output}()));
00122         \} \textcolor{keywordflow}{else} \{
00123             qDebug() << \textcolor{stringliteral}{"invisible"};
00124         \}
00125     \});
00126     \hyperlink{classSH__ValidationState}{SH\_ValidationState} *validationState = qobject\_cast<
      \hyperlink{classSH__ValidationState}{SH\_ValidationState}*>(state);
00127     \textcolor{keywordflow}{if}(validationState) \{
00128         \textcolor{comment}{/*à faire au moment de l'entrée dans l'état state*/}
00129         connect(validationState, &QState::entered, [=]() \{
00130             connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_a5a5804bd32a04d25926f6e323b906887}{SH\_InOutStateMachine::validateInput}, 
      validationState, &\hyperlink{classSH__ConfirmationState_ae47d89a7fc0ada8eb51d8bef2317b348}{SH\_ValidationState::confirmInput});
00131         \});
00132     \}
00133     \hyperlink{classSH__ConfirmationState}{SH\_ConfirmationState} *confirmationState = qobject\_cast<
      \hyperlink{classSH__ConfirmationState}{SH\_ConfirmationState}*>(state);
00134     \textcolor{keywordflow}{if}(confirmationState) \{
00135         \textcolor{comment}{/*à faire au moment de l'entrée dans l'état state*/}
00136         connect(confirmationState, &QState::entered, [=]() \{
00137             connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_a5a5804bd32a04d25926f6e323b906887}{SH\_InOutStateMachine::validateInput}, 
      confirmationState, &\hyperlink{classSH__ConfirmationState_ae47d89a7fc0ada8eb51d8bef2317b348}{SH\_ConfirmationState::confirmInput});
00138         \});
00139     \}
00140     \hyperlink{classSH__DateQuestionState}{SH\_DateQuestionState} *dateState = qobject\_cast<
      \hyperlink{classSH__DateQuestionState}{SH\_DateQuestionState}*>(state);
00141     \textcolor{keywordflow}{if}(dateState) \{
00142         \textcolor{comment}{/*à faire au moment de l'entrée dans l'état state*/}
00143         connect(dateState, &QState::entered, \textcolor{keyword}{this}, &
      \hyperlink{classSH__InOutStateMachine_a0d241868828cbf9798233a8c74c69851}{SH\_InOutStateMachine::displayCalendar});
00144     \}
00145     \hyperlink{classSH__FileSelectionState}{SH\_FileSelectionState} *fileState = qobject\_cast<
      \hyperlink{classSH__FileSelectionState}{SH\_FileSelectionState}*>(state);
00146     \textcolor{keywordflow}{if}(fileState) \{
00147         \textcolor{comment}{/*à faire au moment de l'entrée dans l'état state*/}
00148         connect(fileState, &QState::entered, \textcolor{keyword}{this}, &
      \hyperlink{classSH__InOutStateMachine_aeddfbc098f5ee8ac05eadbaf37803fb1}{SH\_InOutStateMachine::displayFileDialog});
00149     \}
00150     \textcolor{comment}{/*à faire au moment de la sortie de l'état state*/}
00151     connect(state, &QState::exited, [=]() \{
00152         qDebug() << \textcolor{stringliteral}{"exited !"};
00153         \textcolor{keywordflow}{if}(!field.isEmpty()) \{
00154             \hyperlink{classSH__InOutStateMachine_aa2766b7a7ba39c35a10df7fc0c151b4f}{setContentValue}(state->\hyperlink{classSH__InOutState_a4b1ca094de91c47690ec2d1e95678273}{rawInput}(), field);
00155             \textcolor{comment}{/*gestion de l'historique des états pour pouvoir revenir à l'état state après l'avoir quitté*/}
00156             QHistoryState* hState = \textcolor{keyword}{new} QHistoryState(state);
00157             \hyperlink{classSH__InOutStateMachine_a4b72e6da839782a211692a4d728c3925}{setIOStateHistory}(hState, field);
00158         \}
00159         state->disconnect(\textcolor{keyword}{this}); \textcolor{comment}{/*plus aucune action sur l'état ne pourra être provoquée par la machine*/}
00160     \});
00161 
00162 
00163     QAbstractState* astate = qobject\_cast<QAbstractState *>(state);
00164     \textcolor{keywordflow}{if}(astate) \{
00165         addState(astate);
00166     \}
00167 \}
00168 
\hypertarget{SH__IOStateMachine_8cpp_source_l00175}{}\hyperlink{classSH__InOutStateMachine_a56954869252c7f1980abf37df9919b5e}{00175} \textcolor{keywordtype}{void} \hyperlink{classSH__InOutStateMachine_a56954869252c7f1980abf37df9919b5e}{SH\_InOutStateMachine::addIOStateMachine}(
      \hyperlink{classSH__InOutStateMachine}{SH\_InOutStateMachine} *fsm)
00176 \{
00177     \textcolor{comment}{/*à faire au moment de l'entrée dans la machine d'état fsm*/}
00178     connect(fsm, &QState::entered, [=]() \{
00179         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_ab224e4a6ab99c15770bc63e1b8fdb771}{SH\_InOutStateMachine::receiveInput}, fsm, &
      \hyperlink{classSH__InOutStateMachine_ab224e4a6ab99c15770bc63e1b8fdb771}{SH\_InOutStateMachine::receiveInput});
00180         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_ae2cbbe3cd207158668dcb4838938c7ad}{SH\_InOutStateMachine::sendText}, fsm, &
      \hyperlink{classSH__InOutStateMachine_ae2cbbe3cd207158668dcb4838938c7ad}{SH\_InOutStateMachine::sendText});
00181         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_a526822c66b46aa0cd81ba4473fa5573f}{SH\_InOutStateMachine::resendText}, fsm, &
      \hyperlink{classSH__InOutStateMachine_a526822c66b46aa0cd81ba4473fa5573f}{SH\_InOutStateMachine::resendText});
00182         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_a0fb4c4d63ccb19df48f1e060d02d8ae3}{SH\_InOutStateMachine::confirmInput}, fsm, &
      \hyperlink{classSH__InOutStateMachine_a0fb4c4d63ccb19df48f1e060d02d8ae3}{SH\_InOutStateMachine::confirmInput});
00183         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_a5a5804bd32a04d25926f6e323b906887}{SH\_InOutStateMachine::validateInput}, fsm, &
      \hyperlink{classSH__InOutStateMachine_a5a5804bd32a04d25926f6e323b906887}{SH\_InOutStateMachine::validateInput});
00184         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_af5f82970faef3bca48a147863dba2ee1}{SH\_InOutStateMachine::replaceInput}, fsm, &
      \hyperlink{classSH__InOutStateMachine_af5f82970faef3bca48a147863dba2ee1}{SH\_InOutStateMachine::replaceInput});
00185         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_a67ce246a765ad91fef76f70ece12213f}{SH\_InOutStateMachine::cancelReplacement}, fsm,
       &\hyperlink{classSH__InOutStateMachine_a67ce246a765ad91fef76f70ece12213f}{SH\_InOutStateMachine::cancelReplacement});
00186         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_a0d241868828cbf9798233a8c74c69851}{SH\_InOutStateMachine::displayCalendar}, fsm, &
      \hyperlink{classSH__InOutStateMachine_a0d241868828cbf9798233a8c74c69851}{SH\_InOutStateMachine::displayCalendar});
00187     \});
00188     \textcolor{comment}{/*à faire au moment de la sortie de la machine d'état fsm*/}
00189     connect(fsm, &QState::exited, [=]() \{
00190         fsm->disconnect(\textcolor{keyword}{this}); \textcolor{comment}{/*plus aucune action sur la machine d'état fille ne pourra être provoquée
       par la machine mère*/}
00191     \});
00192 
00193 \}
00194 
00195 
\hypertarget{SH__IOStateMachine_8cpp_source_l00202}{}\hyperlink{classSH__InOutStateMachine_a4ec3ebb4c40ea57c63afdf5976e62a94}{00202} QMap<QString, QHistoryState *> \hyperlink{classSH__InOutStateMachine_a4ec3ebb4c40ea57c63afdf5976e62a94}{SH\_InOutStateMachine::ioStatesHistory}()\textcolor{keyword}{
       const}
00203 \textcolor{keyword}{}\{
00204     \textcolor{keywordflow}{return} \hyperlink{classSH__InOutStateMachine_aaca2ea542b3f5b4cd238396b07492455}{m\_ioStatesHistory};
00205 \}
00206 
00207 
\hypertarget{SH__IOStateMachine_8cpp_source_l00214}{}\hyperlink{classSH__InOutStateMachine_ab35839e7880506286ebb5a11c2a924c2}{00214} \textcolor{keywordtype}{void} \hyperlink{classSH__InOutStateMachine_ab35839e7880506286ebb5a11c2a924c2}{SH\_InOutStateMachine::setIOStatesHistory}(\textcolor{keyword}{const} QMap<QString,
       QHistoryState *> &ioStatesHistory)
00215 \{
00216     \hyperlink{classSH__InOutStateMachine_aaca2ea542b3f5b4cd238396b07492455}{m\_ioStatesHistory} = \hyperlink{classSH__InOutStateMachine_a4ec3ebb4c40ea57c63afdf5976e62a94}{ioStatesHistory};
00217 \}
00218 
00219 
\hypertarget{SH__IOStateMachine_8cpp_source_l00226}{}\hyperlink{classSH__InOutStateMachine_a4b72e6da839782a211692a4d728c3925}{00226} \textcolor{keywordtype}{void} \hyperlink{classSH__InOutStateMachine_a4b72e6da839782a211692a4d728c3925}{SH\_InOutStateMachine::setIOStateHistory}(QHistoryState *state, 
      QString field)
00227 \{
00228     \hyperlink{classSH__InOutStateMachine_aaca2ea542b3f5b4cd238396b07492455}{m\_ioStatesHistory}.insert(field, state); \textcolor{comment}{/*remplacement si plusieurs fois*/}
00229 \}
00230 
00231 
\hypertarget{SH__IOStateMachine_8cpp_source_l00238}{}\hyperlink{classSH__InOutStateMachine_a84fb2b2c2105cae9c590c0d15960854a}{00238} QHistoryState *\hyperlink{classSH__InOutStateMachine_a84fb2b2c2105cae9c590c0d15960854a}{SH\_InOutStateMachine::historyValue}(QString field)
00239 \{
00240     \textcolor{keywordflow}{return} \hyperlink{classSH__InOutStateMachine_aaca2ea542b3f5b4cd238396b07492455}{m\_ioStatesHistory}.value(field);
00241 \}
00242 
00243 
\hypertarget{SH__IOStateMachine_8cpp_source_l00250}{}\hyperlink{classSH__InOutStateMachine_a689e5513ef6ef3fc1598efacd413372e}{00250} \textcolor{keywordtype}{void} \hyperlink{classSH__InOutStateMachine_a689e5513ef6ef3fc1598efacd413372e}{SH\_InOutStateMachine::addChildrenNextTransition}(
      QAbstractState *previousState, QAbstractState *nextState)
00251 \{
00252     \hyperlink{classSH__InOutStateMachine}{SH\_InOutStateMachine}* fsmPreviousState = qobject\_cast<
      \hyperlink{classSH__InOutStateMachine}{SH\_InOutStateMachine}*>(previousState);
00253     \hyperlink{classSH__GenericState}{SH\_GenericState}* genPreviousState = qobject\_cast<
      \hyperlink{classSH__GenericState}{SH\_GenericState}*>(previousState);
00254     QFinalState* \textcolor{keyword}{final} = qobject\_cast<QFinalState*>(nextState);
00255     \textcolor{keywordflow}{if}(\textcolor{keyword}{final}) \{
00256         \hyperlink{classSH__AdaptDatabaseState}{SH\_AdaptDatabaseState}* saveState = \textcolor{keyword}{new} 
      \hyperlink{classSH__AdaptDatabaseState}{SH\_AdaptDatabaseState}(\textcolor{stringliteral}{"enregistrement de la machine "}+
      \hyperlink{classSH__InOutStateMachine_a60ecd7de03d948e2d1e9cbedb5c3e5fa}{toString}());
00257         \textcolor{keywordflow}{if}(genPreviousState) \{
00258             genPreviousState->addTransition(genPreviousState, SIGNAL(\hyperlink{classSH__InOutStateMachine_aa9ee51efe0e17dcf5366c8a97b523892}{next}()), saveState);
00259         \}
00260         \textcolor{keywordflow}{if}(fsmPreviousState) \{
00261             fsmPreviousState->addTransition(fsmPreviousState, SIGNAL(\hyperlink{classSH__InOutStateMachine_aa9ee51efe0e17dcf5366c8a97b523892}{next}()), saveState);
00262         \}
00263         \textcolor{keywordflow}{if}(genPreviousState || fsmPreviousState) \{
00264             connect(previousState, &QAbstractState::exited, [=]() \{
00265                 connect(saveState, &QAbstractState::entered, [=]() \{
00266                     emit this->\hyperlink{classSH__InOutStateMachine_ae2cbbe3cd207158668dcb4838938c7ad}{sendText}(\textcolor{stringliteral}{"Merci !"});
00267                     \hyperlink{classSH__InOutStateMachine_aa2766b7a7ba39c35a10df7fc0c151b4f}{setContentValue}(saveState->\hyperlink{classSH__AdaptDatabaseState_ab010e64da052db416328d3bcb9ca01d4}{insertUpdate}(
      \hyperlink{classSH__InOutStateMachine_acc0f5d5133af2dcca30939f53ec8837b}{m\_tableName}, \hyperlink{classSH__InOutStateMachine_a661a1c7bd3b1086b3b5cd60ca957ecbd}{m\_ioContent}), \textcolor{stringliteral}{"ID"});
00268                     emit this->\hyperlink{classSH__InOutStateMachine_ad722deb53285919796b04db5af6e51b4}{clearAll}();
00269                 \});
00270             \});
00271             saveState->addTransition(saveState, SIGNAL(\hyperlink{classSH__InOutStateMachine_aa9ee51efe0e17dcf5366c8a97b523892}{next}()),\textcolor{keyword}{final});
00272         \}
00273     \} \textcolor{keywordflow}{else} \{
00274         \textcolor{keywordflow}{if}(genPreviousState) \{
00275             qDebug() << \textcolor{stringliteral}{"next transition between "} << genPreviousState->\hyperlink{classSH__GenericState_a5480c5ee725fd801d8f6292cd4c803b8}{toString}() << \textcolor{stringliteral}{" and "} << 
      nextState;
00276             genPreviousState->addTransition(genPreviousState, SIGNAL(\hyperlink{classSH__InOutStateMachine_aa9ee51efe0e17dcf5366c8a97b523892}{next}()), nextState);
00277         \}
00278         \textcolor{keywordflow}{if}(fsmPreviousState) \{
00279             qDebug() << \textcolor{stringliteral}{"next transition between "} << fsmPreviousState->\hyperlink{classSH__InOutStateMachine_a60ecd7de03d948e2d1e9cbedb5c3e5fa}{toString}() << \textcolor{stringliteral}{" and "} << 
      nextState;
00280             fsmPreviousState->addTransition(fsmPreviousState, SIGNAL(\hyperlink{classSH__InOutStateMachine_aa9ee51efe0e17dcf5366c8a97b523892}{next}()), nextState);
00281         \}
00282     \}
00283     \textcolor{keywordflow}{if}(genPreviousState) \{
00284         \textcolor{comment}{/*à faire au moment de l'entrée dans l'état previousState*/}
00285         connect(genPreviousState, &QAbstractState::entered, [=]() \{
00286             connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_af5f82970faef3bca48a147863dba2ee1}{SH\_InOutStateMachine::replaceInput}, [=](
      QString field) \{
00287                 \textcolor{comment}{/*après avoir demandé à revenir sur un état précédent, on attend la fin de l'état actuel
       puis on retourne à l'historique de l'état désiré; celui-ci fini, on passe à l'état qui aurait du suivre celui
       pendant lequel on a demandé à revenir sur un état précédent*/}
00288                 QHistoryState* hState = \hyperlink{classSH__InOutStateMachine_a84fb2b2c2105cae9c590c0d15960854a}{historyValue}(field);
00289                 \textcolor{keywordflow}{if}(hState) \{ \textcolor{comment}{/*si l'historique existe (on a déjà quitté l'état voulu)*/}
00290                     hState->parentState()->addTransition(hState->parentState(), SIGNAL(
      \hyperlink{classSH__InOutStateMachine_aa9ee51efe0e17dcf5366c8a97b523892}{next}()), nextState);
00291                     genPreviousState->addTransition(genPreviousState, SIGNAL(
      \hyperlink{classSH__InOutStateMachine_aa9ee51efe0e17dcf5366c8a97b523892}{next}()), hState);
00292                 \}
00293             \});
00294         \});
00295     \}
00296 \}
\end{DoxyCode}
