\hypertarget{QsLogDestFile_8h}{\section{Qs\-Log\-Dest\-File.\-h}
\label{QsLogDestFile_8h}\index{logging/\-Qs\-Log\-Dest\-File.\-h@{logging/\-Qs\-Log\-Dest\-File.\-h}}
}

\begin{DoxyCode}
00001 \textcolor{comment}{/* Copyright (c) 2013, Razvan Petru*/}
00002 \textcolor{comment}{/* All rights reserved.*/}
00003 
00004 \textcolor{comment}{/* Redistribution and use in source and binary forms, with or without modification,*/}
00005 \textcolor{comment}{/* are permitted provided that the following conditions are met:*/}
00006 
00007 \textcolor{comment}{/* * Redistributions of source code must retain the above copyright notice, this*/}
00008 \textcolor{comment}{/*   list of conditions and the following disclaimer.*/}
00009 \textcolor{comment}{/* * Redistributions in binary form must reproduce the above copyright notice, this*/}
00010 \textcolor{comment}{/*   list of conditions and the following disclaimer in the documentation and/or other*/}
00011 \textcolor{comment}{/*   materials provided with the distribution.*/}
00012 \textcolor{comment}{/* * The name of the contributors may not be used to endorse or promote products*/}
00013 \textcolor{comment}{/*   derived from this software without specific prior written permission.*/}
00014 
00015 \textcolor{comment}{/* THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND*/}
00016 \textcolor{comment}{/* ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED*/}
00017 \textcolor{comment}{/* WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED.*/}
00018 \textcolor{comment}{/* IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT,*/}
00019 \textcolor{comment}{/* INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,*/}
00020 \textcolor{comment}{/* BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,*/}
00021 \textcolor{comment}{/* DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF*/}
00022 \textcolor{comment}{/* LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE*/}
00023 \textcolor{comment}{/* OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED*/}
00024 \textcolor{comment}{/* OF THE POSSIBILITY OF SUCH DAMAGE.*/}
00025 
00026 \textcolor{preprocessor}{#ifndef QSLOGDESTFILE\_H}
00027 \textcolor{preprocessor}{}\textcolor{preprocessor}{#define QSLOGDESTFILE\_H}
00028 \textcolor{preprocessor}{}
00029 \textcolor{preprocessor}{#include "\hyperlink{QsLogDest_8h}{QsLogDest.h}"}
00030 \textcolor{preprocessor}{#include <QFile>}
00031 \textcolor{preprocessor}{#include <QTextStream>}
00032 \textcolor{preprocessor}{#include <QtGlobal>}
00033 \textcolor{preprocessor}{#include <QSharedPointer>}
00034 
00035 \textcolor{keyword}{namespace }QsLogging
00036 \{
\hypertarget{QsLogDestFile_8h_source_l00040}{}\hyperlink{classQsLogging_1_1RotationStrategy}{00040} \textcolor{keyword}{class }\hyperlink{classQsLogging_1_1RotationStrategy}{RotationStrategy}
00041 \{
00042 \textcolor{keyword}{public}:
00046     \textcolor{keyword}{virtual} \hyperlink{classQsLogging_1_1RotationStrategy_abd4b37978f48a3c75caa46ee9456b506}{~RotationStrategy}();
00051     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classQsLogging_1_1RotationStrategy_adde9d4dcbca113233438beb43bab7f89}{setInitialInfo}(\textcolor{keyword}{const} QFile &file) = 0;
00056     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classQsLogging_1_1RotationStrategy_a66041e701c257840d3b58ec2fc22c115}{includeMessageInCalculation}(\textcolor{keyword}{const} QString &message) = 0;
00061     \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} \hyperlink{classQsLogging_1_1RotationStrategy_a53136a1009e8a0b30956ea83c43c4973}{shouldRotate}() = 0;
00065     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classQsLogging_1_1RotationStrategy_a11bc6e7d8af7df658f15abb69b3cc294}{rotate}() = 0;
00070     \textcolor{keyword}{virtual} QIODevice::OpenMode \hyperlink{classQsLogging_1_1RotationStrategy_a8179129cae134717d4483c1903de3bdf}{recommendedOpenModeFlag}() = 0;
00071 \};
00072 
00073 \textcolor{comment}{/* Never rotates file, overwrites existing file.*/}
\hypertarget{QsLogDestFile_8h_source_l00077}{}\hyperlink{classQsLogging_1_1NullRotationStrategy}{00077} \textcolor{keyword}{class }\hyperlink{classQsLogging_1_1NullRotationStrategy}{NullRotationStrategy} : \textcolor{keyword}{public} \hyperlink{classQsLogging_1_1RotationStrategy}{RotationStrategy}
00078 \{
00079 \textcolor{keyword}{public}:
\hypertarget{QsLogDestFile_8h_source_l00083}{}\hyperlink{classQsLogging_1_1NullRotationStrategy_a58a640b52b61dc256250dd40ab4025b0}{00083}     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classQsLogging_1_1NullRotationStrategy_a58a640b52b61dc256250dd40ab4025b0}{setInitialInfo}(\textcolor{keyword}{const} QFile &) \{\}
\hypertarget{QsLogDestFile_8h_source_l00087}{}\hyperlink{classQsLogging_1_1NullRotationStrategy_a66753f83f8f42a3c2bb4c5a54d8dd3ff}{00087}     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classQsLogging_1_1NullRotationStrategy_a66753f83f8f42a3c2bb4c5a54d8dd3ff}{includeMessageInCalculation}(\textcolor{keyword}{const} QString &) \{\}
\hypertarget{QsLogDestFile_8h_source_l00092}{}\hyperlink{classQsLogging_1_1NullRotationStrategy_a629d6ede50e0cbde108adb4550247ad6}{00092}     \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} \hyperlink{classQsLogging_1_1NullRotationStrategy_a629d6ede50e0cbde108adb4550247ad6}{shouldRotate}() \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \}
\hypertarget{QsLogDestFile_8h_source_l00096}{}\hyperlink{classQsLogging_1_1NullRotationStrategy_a32dc2cad39aeffbaeedef1f8e7719a68}{00096}     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classQsLogging_1_1NullRotationStrategy_a32dc2cad39aeffbaeedef1f8e7719a68}{rotate}() \{\}
\hypertarget{QsLogDestFile_8h_source_l00101}{}\hyperlink{classQsLogging_1_1NullRotationStrategy_adaa0f8706edc50b1b128c81bbc93b6d9}{00101}     \textcolor{keyword}{virtual} QIODevice::OpenMode \hyperlink{classQsLogging_1_1NullRotationStrategy_adaa0f8706edc50b1b128c81bbc93b6d9}{recommendedOpenModeFlag}() \{ \textcolor{keywordflow}{return} 
      QIODevice::Truncate; \}
00102 \};
00103 
00104 \textcolor{comment}{/* Rotates after a size is reached, keeps a number of <= 10 backups, appends to existing file.*/}
\hypertarget{QsLogDestFile_8h_source_l00108}{}\hyperlink{classQsLogging_1_1SizeRotationStrategy}{00108} \textcolor{keyword}{class }\hyperlink{classQsLogging_1_1SizeRotationStrategy}{SizeRotationStrategy} : \textcolor{keyword}{public} \hyperlink{classQsLogging_1_1RotationStrategy}{RotationStrategy}
00109 \{
00110 \textcolor{keyword}{public}:
00114     \hyperlink{classQsLogging_1_1SizeRotationStrategy_a669845e1cd8a1656b28fbce8a97620b2}{SizeRotationStrategy}();
\hypertarget{QsLogDestFile_8h_source_l00118}{}\hyperlink{classQsLogging_1_1SizeRotationStrategy_a9965384f7b98b191d00eef62b2b417bf}{00118}     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} \hyperlink{classQsLogging_1_1SizeRotationStrategy_a9965384f7b98b191d00eef62b2b417bf}{MaxBackupCount};
00123     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classQsLogging_1_1SizeRotationStrategy_a763f6a2054a6ec5f3600f4e43e07c802}{setInitialInfo}(\textcolor{keyword}{const} QFile &file);
00128     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classQsLogging_1_1SizeRotationStrategy_a3f87aec42ff67a771e31695923935486}{includeMessageInCalculation}(\textcolor{keyword}{const} QString &message);
00133     \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} \hyperlink{classQsLogging_1_1SizeRotationStrategy_aced9d2191e48ae60f039d62fd9c7197f}{shouldRotate}();
00137     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classQsLogging_1_1SizeRotationStrategy_a044a258f08b3f104ccc7fdd80bf45b1a}{rotate}();
00142     \textcolor{keyword}{virtual} QIODevice::OpenMode \hyperlink{classQsLogging_1_1SizeRotationStrategy_a456726dba9e9ddd0c823bbbc1a6a7279}{recommendedOpenModeFlag}();
00147     \textcolor{keywordtype}{void} \hyperlink{classQsLogging_1_1SizeRotationStrategy_a3d37fd3bcc5aa4a84f8bf30af1d17526}{setMaximumSizeInBytes}(qint64 size);
00152     \textcolor{keywordtype}{void} \hyperlink{classQsLogging_1_1SizeRotationStrategy_ab50da4fb0397509e5aeb826e791f09f9}{setBackupCount}(\textcolor{keywordtype}{int} backups);
00153 
00154 \textcolor{keyword}{private}:
\hypertarget{QsLogDestFile_8h_source_l00158}{}\hyperlink{classQsLogging_1_1SizeRotationStrategy_a2a7187b9a1e4d957a9d5718c91a7f1b3}{00158}     QString \hyperlink{classQsLogging_1_1SizeRotationStrategy_a2a7187b9a1e4d957a9d5718c91a7f1b3}{mFileName};
\hypertarget{QsLogDestFile_8h_source_l00162}{}\hyperlink{classQsLogging_1_1SizeRotationStrategy_a655f57a77d5e6384c49a2dffd899ef33}{00162}     qint64 \hyperlink{classQsLogging_1_1SizeRotationStrategy_a655f57a77d5e6384c49a2dffd899ef33}{mCurrentSizeInBytes};
\hypertarget{QsLogDestFile_8h_source_l00166}{}\hyperlink{classQsLogging_1_1SizeRotationStrategy_ab9b1ed9b39de4c90762f38a32935fe01}{00166}     qint64 \hyperlink{classQsLogging_1_1SizeRotationStrategy_ab9b1ed9b39de4c90762f38a32935fe01}{mMaxSizeInBytes};
\hypertarget{QsLogDestFile_8h_source_l00170}{}\hyperlink{classQsLogging_1_1SizeRotationStrategy_a8ffbf6fc9110b82a399c90ce725023e9}{00170}     \textcolor{keywordtype}{int} \hyperlink{classQsLogging_1_1SizeRotationStrategy_a8ffbf6fc9110b82a399c90ce725023e9}{mBackupsCount};
00171 \};
\hypertarget{QsLogDestFile_8h_source_l00175}{}\hyperlink{namespaceQsLogging_a41dc81d39cd3d36d9e15746bd9174be0}{00175} \textcolor{keyword}{typedef} QSharedPointer<RotationStrategy> \hyperlink{namespaceQsLogging_a41dc81d39cd3d36d9e15746bd9174be0}{RotationStrategyPtr};
00176 
00177 \textcolor{comment}{/* file message sink*/}
\hypertarget{QsLogDestFile_8h_source_l00181}{}\hyperlink{classQsLogging_1_1FileDestination}{00181} \textcolor{keyword}{class }\hyperlink{classQsLogging_1_1FileDestination}{FileDestination} : \textcolor{keyword}{public} \hyperlink{classQsLogging_1_1Destination}{Destination}
00182 \{
00183 \textcolor{keyword}{public}:
00189     \hyperlink{classQsLogging_1_1FileDestination_ad42d6551d58f82eeb61ffc6d7d06d5cd}{FileDestination}(\textcolor{keyword}{const} QString& filePath, \hyperlink{namespaceQsLogging_a41dc81d39cd3d36d9e15746bd9174be0}{RotationStrategyPtr} 
      rotationStrategy);
00195     \textcolor{keyword}{virtual} \textcolor{keywordtype}{void} \hyperlink{classQsLogging_1_1FileDestination_a84b076720ccfa4045e1aacc14c5af5dc}{write}(\textcolor{keyword}{const} QString& message, \hyperlink{namespaceQsLogging_a38c7dd87e4de6f8eb460763ad0baa033}{Level} level);
00200     \textcolor{keyword}{virtual} \textcolor{keywordtype}{bool} \hyperlink{classQsLogging_1_1FileDestination_a2d18b70b408910332dcbee9d12c1d394}{isValid}();
00201 
00202 \textcolor{keyword}{private}:
\hypertarget{QsLogDestFile_8h_source_l00206}{}\hyperlink{classQsLogging_1_1FileDestination_a1de182fa4efefa21e6545757f1a04eb2}{00206}     QFile \hyperlink{classQsLogging_1_1FileDestination_a1de182fa4efefa21e6545757f1a04eb2}{mFile};
\hypertarget{QsLogDestFile_8h_source_l00210}{}\hyperlink{classQsLogging_1_1FileDestination_a10f0aa5513ec40d3e362179b084a43d6}{00210}     QTextStream \hyperlink{classQsLogging_1_1FileDestination_a10f0aa5513ec40d3e362179b084a43d6}{mOutputStream};
\hypertarget{QsLogDestFile_8h_source_l00214}{}\hyperlink{classQsLogging_1_1FileDestination_ab20945842bd063b5cbe82485168be1f0}{00214}     QSharedPointer<RotationStrategy> \hyperlink{classQsLogging_1_1FileDestination_ab20945842bd063b5cbe82485168be1f0}{mRotationStrategy};
00215 \};
00216 
00217 \}
00218 
00219 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* QSLOGDESTFILE\_H*/}\textcolor{preprocessor}{}
\end{DoxyCode}
