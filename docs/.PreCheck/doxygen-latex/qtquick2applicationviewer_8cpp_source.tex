\hypertarget{qtquick2applicationviewer_8cpp}{\section{qtquick2applicationviewer.\-cpp}
\label{qtquick2applicationviewer_8cpp}\index{views/qtquick2applicationviewer/qtquick2applicationviewer.\-cpp@{views/qtquick2applicationviewer/qtquick2applicationviewer.\-cpp}}
}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#ifndef DOXYGEN\_SHOULD\_SKIP\_THIS}
00002 \textcolor{preprocessor}{}
00003 \textcolor{comment}{/* checksum 0x440d version 0x90003*/}
00004 \textcolor{comment}{/*}
00005 \textcolor{comment}{  This file was generated by the Qt Quick 2 Application wizard of Qt Creator.}
00006 \textcolor{comment}{  QtQuick2ApplicationViewer is a convenience class containing mobile device specific}
00007 \textcolor{comment}{  code such as screen orientation handling. Also QML paths and debugging are}
00008 \textcolor{comment}{  handled here.}
00009 \textcolor{comment}{  It is recommended not to modify this file, since newer versions of Qt Creator}
00010 \textcolor{comment}{  may offer an updated version of it.}
00011 \textcolor{comment}{*/}
00012 
00013 \textcolor{preprocessor}{#include "\hyperlink{qtquick2applicationviewer_8h}{qtquick2applicationviewer.h}"}
00014 
00015 \textcolor{preprocessor}{#include <QtCore/QCoreApplication>}
00016 \textcolor{preprocessor}{#include <QtCore/QDir>}
00017 \textcolor{preprocessor}{#include <QtQml/QQmlEngine>}
00018 
00019 \textcolor{keyword}{class }QtQuick2ApplicationViewerPrivate
00020 \{
00021     QString mainQmlFile;
00022     \textcolor{keyword}{friend} \textcolor{keyword}{class }QtQuick2ApplicationViewer;
00023     \textcolor{keyword}{static} QString adjustPath(\textcolor{keyword}{const} QString &path);
00024 \};
00025 
00026 QString QtQuick2ApplicationViewerPrivate::adjustPath(\textcolor{keyword}{const} QString &path)
00027 \{
00028 \textcolor{preprocessor}{#if defined(Q\_OS\_MAC)}
00029 \textcolor{preprocessor}{}    \textcolor{keywordflow}{if} (!QDir::isAbsolutePath(path))
00030         \textcolor{keywordflow}{return} QString::fromLatin1(\textcolor{stringliteral}{"%1/../Resources/%2"})
00031                 .arg(QCoreApplication::applicationDirPath(), path);
00032 \textcolor{preprocessor}{#elif defined(Q\_OS\_QNX)}
00033 \textcolor{preprocessor}{}    \textcolor{keywordflow}{if} (!QDir::isAbsolutePath(path))
00034         \textcolor{keywordflow}{return} QString::fromLatin1(\textcolor{stringliteral}{"app/native/%1"}).arg(path);
00035 \textcolor{preprocessor}{#elif defined(Q\_OS\_UNIX) && !defined(Q\_OS\_ANDROID)}
00036 \textcolor{preprocessor}{}    \textcolor{keyword}{const} QString pathInInstallDir =
00037             QString::fromLatin1(\textcolor{stringliteral}{"%1/../%2"}).arg(QCoreApplication::applicationDirPath(), path);
00038     \textcolor{keywordflow}{if} (QFileInfo(pathInInstallDir).exists())
00039         \textcolor{keywordflow}{return} pathInInstallDir;
00040 \textcolor{preprocessor}{#endif}
00041 \textcolor{preprocessor}{}    \textcolor{keywordflow}{return} path;
00042 \}
00043 
00044 QtQuick2ApplicationViewer::QtQuick2ApplicationViewer(QWindow *parent)
00045     : QQuickView(parent)
00046     , d(new QtQuick2ApplicationViewerPrivate())
00047 \{
00048     connect(engine(), SIGNAL(\hyperlink{classSH__WelcomePage_add4c38249bbc1cdf0d3ff7aed9049a6f}{quit}()), SLOT(close()));
00049     setResizeMode(QQuickView::SizeRootObjectToView);
00050 \}
00051 
00052 QtQuick2ApplicationViewer::~QtQuick2ApplicationViewer()
00053 \{
00054     \textcolor{keyword}{delete} d;
00055 \}
00056 
00057 \textcolor{keywordtype}{void} QtQuick2ApplicationViewer::setMainQmlFile(\textcolor{keyword}{const} QString &file)
00058 \{
00059     d->mainQmlFile = QtQuick2ApplicationViewerPrivate::adjustPath(file);
00060 \textcolor{preprocessor}{#ifdef Q\_OS\_ANDROID}
00061 \textcolor{preprocessor}{}    setSource(QUrl(QLatin1String(\textcolor{stringliteral}{"assets:/"})+d->mainQmlFile));
00062 \textcolor{preprocessor}{#else}
00063 \textcolor{preprocessor}{}    setSource(QUrl::fromLocalFile(d->mainQmlFile));
00064 \textcolor{preprocessor}{#endif}
00065 \textcolor{preprocessor}{}\}
00066 
00067 \textcolor{keywordtype}{void} QtQuick2ApplicationViewer::addImportPath(\textcolor{keyword}{const} QString &path)
00068 \{
00069     engine()->addImportPath(QtQuick2ApplicationViewerPrivate::adjustPath(path));
00070 \}
00071 
00072 \textcolor{keywordtype}{void} QtQuick2ApplicationViewer::showExpanded()
00073 \{
00074 \textcolor{preprocessor}{#if defined(Q\_WS\_SIMULATOR) || defined(Q\_OS\_QNX)}
00075 \textcolor{preprocessor}{}    showFullScreen();
00076 \textcolor{preprocessor}{#else}
00077 \textcolor{preprocessor}{}    show();
00078 \textcolor{preprocessor}{#endif}
00079 \textcolor{preprocessor}{}\}
00080 
00081 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* DOXYGEN\_SHOULD\_SKIP\_THIS */}\textcolor{preprocessor}{}
\end{DoxyCode}
