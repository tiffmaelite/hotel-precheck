\hypertarget{examplemain_8cpp}{\section{examplemain.\-cpp}
\label{examplemain_8cpp}\index{logging/examplemain.\-cpp@{logging/examplemain.\-cpp}}
}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#ifndef DOXYGEN\_SHOULD\_SKIP\_THIS}
00002 \textcolor{preprocessor}{}
00003 \textcolor{preprocessor}{#include "\hyperlink{QsLog_8h}{QsLog.h}"}
00004 \textcolor{preprocessor}{#include "\hyperlink{QsLogDest_8h}{QsLogDest.h}"}
00005 \textcolor{preprocessor}{#include <QtCore/QCoreApplication>}
00006 \textcolor{preprocessor}{#include <QtCore/QDir>}
00007 \textcolor{preprocessor}{#include <iostream>}
00008 
00009 \textcolor{keywordtype}{int} \hyperlink{main_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main}(\textcolor{keywordtype}{int} argc, \textcolor{keywordtype}{char} *argv[])
00010 \{
00011    QCoreApplication a(argc, argv);
00012 
00013    \textcolor{comment}{/* init the logging mechanism}
00014 \textcolor{comment}{*/}
00015    \hyperlink{classQsLogging_1_1Logger}{QsLogging::Logger}& logger = \hyperlink{classQsLogging_1_1Logger_a26fd3242d362eeeb3b38940a714ea6fa}{QsLogging::Logger::instance}();
00016    logger.\hyperlink{classQsLogging_1_1Logger_aa34d1a0d83e180f15e23a03f9de872c6}{setLoggingLevel}(\hyperlink{namespaceQsLogging_a38c7dd87e4de6f8eb460763ad0baa033a187ba10e2b3b400c6ee33afe6fc10915}{QsLogging::TraceLevel});
00017    \textcolor{keyword}{const} QString sLogPath(QDir(a.applicationDirPath()).filePath(\textcolor{stringliteral}{"log.txt"}));
00018 
00019    \hyperlink{namespaceQsLogging_a8fe41cf859d617f1c23515f804d1e8ec}{QsLogging::DestinationPtr} fileDestination(
00020       \hyperlink{classQsLogging_1_1DestinationFactory_abc128b6640d5716b91c681df960b878c}{QsLogging::DestinationFactory::MakeFileDestination}(
      sLogPath, \textcolor{keyword}{true}, 512, 2) );
00021    \hyperlink{namespaceQsLogging_a8fe41cf859d617f1c23515f804d1e8ec}{QsLogging::DestinationPtr} debugDestination(
00022       \hyperlink{classQsLogging_1_1DestinationFactory_a69eecb9933440870bb809c4e32ac1987}{QsLogging::DestinationFactory::MakeDebugOutputDestination}
      () );
00023    logger.\hyperlink{classQsLogging_1_1Logger_a76a32c839e837547b14bc5e523b4aa45}{addDestination}(debugDestination);
00024    logger.\hyperlink{classQsLogging_1_1Logger_a76a32c839e837547b14bc5e523b4aa45}{addDestination}(fileDestination);
00025 
00026    \hyperlink{QsLog_8h_ad8aec737ba0e3607fb5be7590c6ab0ff}{QLOG\_INFO}() << \textcolor{stringliteral}{"Program started"};
00027    \hyperlink{QsLog_8h_ad8aec737ba0e3607fb5be7590c6ab0ff}{QLOG\_INFO}() << \textcolor{stringliteral}{"Built with Qt"} << QT\_VERSION\_STR << \textcolor{stringliteral}{"running on"} << qVersion();
00028 
00029    \hyperlink{QsLog_8h_ae92d90bd8b64e6cfe285f7dfe4c6a138}{QLOG\_TRACE}() << \textcolor{stringliteral}{"Here's a"} << QString::fromUtf8(\textcolor{stringliteral}{"trace"}) << \textcolor{stringliteral}{"message"};
00030    \hyperlink{QsLog_8h_abd6d078a03c308c28a48cc1e9bf44e54}{QLOG\_DEBUG}() << \textcolor{stringliteral}{"Here's a"} << \textcolor{keyword}{static\_cast<}\textcolor{keywordtype}{int}\textcolor{keyword}{>}(
      \hyperlink{namespaceQsLogging_a38c7dd87e4de6f8eb460763ad0baa033a2a6c1ca8703fa87e56dae43e9adbecda}{QsLogging::DebugLevel}) << \textcolor{stringliteral}{"message"};
00031    \hyperlink{QsLog_8h_ac9af894fe2ccff345615aa0de4b48a64}{QLOG\_WARN}()  << \textcolor{stringliteral}{"Uh-oh!"};
00032    qDebug() << \textcolor{stringliteral}{"This message won't be picked up by the logger"};
00033    \hyperlink{QsLog_8h_a9a46ec93e4716bae7d3c5e8894793970}{QLOG\_ERROR}() << \textcolor{stringliteral}{"An error has occurred"};
00034    qWarning() << \textcolor{stringliteral}{"Neither will this one"};
00035    \hyperlink{QsLog_8h_ac4c2ea9af6f62e92c7e26b4028ae20df}{QLOG\_FATAL}() << \textcolor{stringliteral}{"Fatal error!"};
00036 
00037    logger.\hyperlink{classQsLogging_1_1Logger_aa34d1a0d83e180f15e23a03f9de872c6}{setLoggingLevel}(\hyperlink{namespaceQsLogging_a38c7dd87e4de6f8eb460763ad0baa033a64b8289ed8a99f811404140cbcb2549c}{QsLogging::OffLevel});
00038    \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0;i < 10000000;++i) \{
00039        \hyperlink{QsLog_8h_a9a46ec93e4716bae7d3c5e8894793970}{QLOG\_ERROR}() << QString::fromUtf8(\textcolor{stringliteral}{"logging is turned off"});
00040    \}
00041 
00042    \textcolor{keywordflow}{return} 0;
00043 \}
00044 
00045 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* DOXYGEN\_SHOULD\_SKIP\_THIS */}\textcolor{preprocessor}{}
\end{DoxyCode}
