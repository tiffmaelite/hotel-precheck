<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>PreCheck:  Fichier source de /home/tiff/Stage-IUT/app/simplhotel/hotel-precheck/src/PreCheck/views/qml/SH_CalendarDialog.qml</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="$relpathdoxygen.css.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">PreCheck
   &#160;<span id="projectnumber">0.3</span>
   </div>
   <div id="projectbrief">Logiciel open-source de main-courante pour une réception                                                 d&#39;hôtel à écran tactile, permettant l&#39;impression de                                                 factures pré-check et la gestion d&#39;une archive client</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- Généré par Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Page&#160;principale</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Fichiers</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>Liste&#160;des&#160;fichiers</span></a></li>
      <li><a href="globals.html"><span>Membres&#160;de&#160;fichier</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="dir_c041bda47019fa3c84f6631c354a852f.html">PreCheck</a></li><li class="navelem"><a class="el" href="dir_c6b67c5d790d73d5f77581c2751c7958.html">views</a></li><li class="navelem"><a class="el" href="dir_2d0df5ce6a012e960077ac659b7557ab.html">qml</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">SH_CalendarDialog.qml</div>  </div>
</div><!--header-->
<div class="contents">
<a href="SH__CalendarDialog_8qml.html">Aller à la documentation de ce fichier.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="keyword">import</span> QtQuick 2.1</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;import QtQuick.Window 2.1</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;import QtQuick.Controls 1.0</div>
<div class="line"><a name="l00004"></a><span class="lineno"><a class="code" href="classSH__CalendarDialog.html">    4</a></span>&#160;import QtQuick.Controls.Styles 1.0</div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;import QtQuick.Layouts 1.0</div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;import PreCheck 1.0</div>
<div class="line"><a name="l00007"></a><span class="lineno"><a class="code" href="classSH__CalendarDialog.html#ada6f44b6f1a93ae9ef40b2fd3acdabd1">    7</a></span>&#160;</div>
<div class="line"><a name="l00011"></a><span class="lineno"><a class="code" href="classSH__CalendarDialog.html#a697b1e3c3faeee03197b575dd17cecdb">   11</a></span>&#160;Rectangle {</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;    color: <span class="stringliteral">&quot;green&quot;</span></div>
<div class="line"><a name="l00013"></a><span class="lineno"><a class="code" href="classSH__CalendarDialog.html#aa573e78a85228cbf2312b3bd7b776bbd">   13</a></span>&#160;    <span class="keywordtype">id</span>: calendar</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;    <span class="keyword">property</span> <span class="keywordtype">int</span> firstWeekdayIndex: 1</div>
<div class="line"><a name="l00015"></a><span class="lineno"><a class="code" href="classSH__CalendarDialog.html#a2c0ae47d55757e17551d5d6ea5413bb9">   15</a></span>&#160;    <span class="keyword">property</span> <span class="keywordtype">string</span> text</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;    readonly <span class="keyword">property</span> alias currentDate: calendarBase.currentDate</div>
<div class="line"><a name="l00017"></a><span class="lineno"><a class="code" href="classSH__CalendarDialog.html#a297eca7b6afa21350ff89a43580ff406">   17</a></span>&#160;    readonly <span class="keyword">property</span> alias currentWeekday: calendarBase.currentWeekday</div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    readonly <span class="keyword">property</span> alias currentDay: calendarBase.currentDay</div>
<div class="line"><a name="l00019"></a><span class="lineno"><a class="code" href="classSH__CalendarDialog.html#a98760601bdd0a916ee33f4ed7ff185aa">   19</a></span>&#160;    readonly <span class="keyword">property</span> alias currentMonth: calendarBase.currentMonth</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    readonly <span class="keyword">property</span> alias currentYear: calendarBase.currentYear</div>
<div class="line"><a name="l00021"></a><span class="lineno"><a class="code" href="classSH__CalendarDialog.html#a9708f1f6b6cdcf136c533e206a29d98e">   21</a></span>&#160;    readonly <span class="keyword">property</span> alias currentMonthLength: calendarBase.currentMonthLength</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;    readonly <span class="keyword">property</span> variant monthsList: [qsTr(<span class="stringliteral">&quot;Janvier&quot;</span>),qsTr(<span class="stringliteral">&quot;Février&quot;</span>),qsTr(<span class="stringliteral">&quot;Mars&quot;</span>), qsTr(<span class="stringliteral">&quot;Avril&quot;</span>),qsTr(<span class="stringliteral">&quot;Mai&quot;</span>),qsTr(<span class="stringliteral">&quot;Juin&quot;</span>),qsTr(<span class="stringliteral">&quot;Juillet&quot;</span>),qsTr(<span class="stringliteral">&quot;Août&quot;</span>),qsTr(<span class="stringliteral">&quot;Septembre&quot;</span>),qsTr(<span class="stringliteral">&quot;Octobre&quot;</span>),qsTr(<span class="stringliteral">&quot;Novembre&quot;</span>),qsTr(<span class="stringliteral">&quot;Décembre&quot;</span>)]</div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="code" href="classSH__CalendarDialog.html#a86a4ef51cbfb7299a55bbddf2ae60f6a">   23</a></span>&#160;    readonly <span class="keyword">property</span> variant weekdaysList: [qsTr(<span class="stringliteral">&quot;Di&quot;</span>),qsTr(<span class="stringliteral">&quot;Lu&quot;</span>),qsTr(<span class="stringliteral">&quot;Ma&quot;</span>),qsTr(<span class="stringliteral">&quot;Me&quot;</span>), qsTr(<span class="stringliteral">&quot;Je&quot;</span>),qsTr(<span class="stringliteral">&quot;Ve&quot;</span>),qsTr(<span class="stringliteral">&quot;Sa&quot;</span>)]</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;    signal clicked(date selectedDate)</div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="code" href="classSH__CalendarDialog.html#a4ceac0c8c8f2b0d05060ddd66986b8e0">   25</a></span>&#160;    signal refresh(date newDate)</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;    signal selected(<span class="keywordtype">string</span> selectedDate)</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    signal closed()</div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    signal opened()</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;    visible: true</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;    onClosed: {</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;        calendar.visible = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;    }</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;    onOpened: {</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        calendar.visible = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;    }</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    Component.onCompleted: {</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;        calendar.clicked(<span class="keyword">new</span> Date());</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;        calendar.refresh(<span class="keyword">new</span> Date());</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;    }</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;    onClicked: {</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;        <span class="comment">/*console.log(&quot;selected date &quot;+selectedDate);*/</span></div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;        var year = selectedDate.getFullYear();</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;        var month = selectedDate.getMonth();</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;        var day = selectedDate.getDate();</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;        dateDay.text = day;</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;        dateMonth.text = monthsList[month];</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;        dateYear.text = year;</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        calendar.text = qsTr(<span class="stringliteral">&quot;%1 - %2 - %3&quot;</span>).arg(day).arg(monthsList[month]).arg(year);</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;    }</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;    onRefresh: {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        calendarBase.ready = <span class="keyword">false</span>;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <span class="comment">/*console.log(&quot;refreshed with date &quot;+newDate);*/</span></div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        calendarBase.currentDate = newDate;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        var year = newDate.getFullYear();</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        var month = newDate.getMonth();</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        var day = newDate.getDate();</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        var monthLength = <span class="keyword">new</span> Date(year, month+1, 0).getDate(); <span class="comment">/*javascript Date trick since day count &quot;starts&quot; at 1 whereas month count starts at 0*/</span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        var firstWeekday = <span class="keyword">new</span> Date(year, month, 1).getDay();</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        calendarBase.currentWeekday = newDate.getDay();</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;        calendarBase.currentDay = day;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;        calendarBase.currentMonth = month;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        calendarBase.currentYear = year;</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        calendarBase.currentMonthLength = monthLength;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        calendarBase.currentMonthFirstWeekday = (calendar.firstWeekdayIndex &gt;= 0 &amp;&amp; calendar.firstWeekdayIndex &lt; 7) ? ((firstWeekday - calendar.firstWeekdayIndex) % 7) : firstWeekday;</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;        <span class="comment">/*calendarBase.currentMonthLastWeekday = new Date(year, month, new Date(year, month, 0).getDate()).getDay();*/</span></div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;        month.text = qsTr(<span class="stringliteral">&quot;%1 %2&quot;</span>).arg(monthsList[month]).arg(year);</div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;        gridRepeater.model = 7 * (Math.ceil(monthLength / 7) + 1);</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;        calendarBase.ready = <span class="keyword">true</span>;</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;    }</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;    ColumnLayout {</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="keywordtype">id</span>: calendarBase</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="keyword">property</span> date currentDate: <span class="keyword">new</span> Date()</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        property <span class="keywordtype">bool</span> ready: true</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        property <span class="keywordtype">string</span> currentWeekday</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        property <span class="keywordtype">string</span> currentDay</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        property <span class="keywordtype">string</span> currentMonth</div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;        property <span class="keywordtype">string</span> currentYear</div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;        property <span class="keywordtype">int</span> currentMonthLength</div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;        property <span class="keywordtype">int</span> currentMonthFirstWeekday</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;        property <span class="keywordtype">int</span> currentMonthLastWeekday</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;        spacing: 0</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;        anchors.fill: calendar</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;        RowLayout {</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;            <span class="keywordtype">id</span>: dateDisplay</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            Layout.minimumWidth: childrenRect.width</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;            Layout.preferredHeight: Math.max(Math.max(dateDay.paintedHeight,dateMonth.paintedHeight),dateYear.paintedHeight)+20</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            Layout.fillWidth: <span class="keyword">true</span></div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;            Text {</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;                <span class="keywordtype">id</span>: dateDay</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;                Layout.preferredWidth: calendar.width / 3 - 2</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;                horizontalAlignment: Text.AlignHCenter</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;            }</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            Text {</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;                <span class="keywordtype">id</span>: dateMonth</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;                Layout.preferredWidth: calendar.width / 3 - 2</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;                horizontalAlignment: Text.AlignHCenter</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;            }</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;            Text {</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                <span class="keywordtype">id</span>: dateYear</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                Layout.preferredWidth: calendar.width / 3 - 2</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                horizontalAlignment: Text.AlignHCenter</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;            }</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;            MouseArea {</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                <span class="keywordtype">id</span>: dateDisplayArea</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                anchors.fill: dateDisplay</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                onClicked: {</div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                    calendar.opened();</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                }</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                onDoubleClicked: {</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                    dateDisplayArea.clicked(mouse);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                }</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;            }</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        }</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;        <a class="code" href="classRectangle.html">Rectangle</a> {</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;            <span class="keywordtype">id</span>: headRow</div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;            color: <span class="stringliteral">&quot;red&quot;</span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;            Layout.minimumWidth: childrenRect.width</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;            Layout.minimumHeight: month.paintedHeight</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;            Layout.maximumHeight: 3*month.paintedHeight/2</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;            Layout.fillWidth: <span class="keyword">true</span></div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;            RowLayout {</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                anchors.fill:headRow</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                spacing: 0</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                Image {</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                    <span class="keywordtype">id</span>: previousMonth</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                    Layout.preferredHeight: headRow.height</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                    fillMode: Image.PreserveAspectFit</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                    source: <span class="stringliteral">&quot;../img/left.png&quot;</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                    Layout.alignment: Qt.AlignLeft</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                    Layout.columnSpan: 1</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                    MouseArea {</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                        <span class="keywordtype">id</span>: previousMonthArea</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                        enabled: calendarBase.ready</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                        anchors.fill: previousMonth</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                        onClicked: {</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                            calendar.refresh(<span class="keyword">new</span> Date(calendarBase.currentYear, (calendarBase.currentMonth - 1 % 12), 1));</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                        }</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                        onDoubleClicked: {</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                            previousMonthArea.clicked(mouse)</div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                        }</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                    }</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                }</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                Text {</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                    <span class="keywordtype">id</span>: month</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                    text:qsTr(<span class="stringliteral">&quot;%1 %L2&quot;</span>).arg(monthsList[calendarBase.currentMonth]).arg(calendarBase.currentYear);</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                    Layout.preferredHeight: headRow.height</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                    Layout.alignment: Qt.AlignHCenter</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                    Layout.columnSpan: 6</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;                Image {</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                    <span class="keywordtype">id</span>:nextMonth</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;                    Layout.alignment: Qt.AlignRight</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;                    Layout.columnSpan: 1</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;                    Layout.preferredHeight: headRow.height</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;                    fillMode: Image.PreserveAspectFit</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;                    source: <span class="stringliteral">&quot;../img/right.png&quot;</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;                    MouseArea {</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;                        <span class="keywordtype">id</span>:  nextMonthArea</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;                        enabled: calendarBase.ready</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;                        anchors.fill: nextMonth</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;                        onClicked: {</div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;                            calendar.refresh(<span class="keyword">new</span> Date(calendarBase.currentYear, (calendarBase.currentMonth + 1 % 12), 1));</div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;                        }</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;                        onDoubleClicked: {</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;                            nextMonthArea.clicked(mouse)</div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;                        }</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;                    }</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                }</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;            }</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;        }</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;        <a class="code" href="classRectangle.html">Rectangle</a> {</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;            <span class="keywordtype">id</span>:grid</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;            color: <span class="stringliteral">&quot;pink&quot;</span></div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;            Layout.fillHeight: <span class="keyword">true</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;            Layout.fillWidth: <span class="keyword">true</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;            Layout.preferredHeight: childrenRect.height+2</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;            Layout.preferredWidth: childrenRect.width+2</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;            <a class="code" href="classGridLayout.html">GridLayout</a> {</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                <span class="keywordtype">id</span>: calendarGrid</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                anchors.fill:grid</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                columns: 7</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                flow: Qt.LeftToRight</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                <span class="comment">/*rows: 1 + Math.ceil(calendarBase.currentMonthLength / 7) */</span> <span class="comment">/*unnecessary because of the horizontal flow*/</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                columnSpacing: 1</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                rowSpacing: 1</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                Repeater {</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                    <span class="keywordtype">id</span>: gridRepeater</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                    <span class="comment">/*Layout.fillWidth: true */</span><span class="comment">/*no effect*/</span></div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    <span class="comment">/*Layout.fillHeight: true */</span><span class="comment">/*no effect*/</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                    model : 7 * (Math.ceil(calendarBase.currentMonthLength / 7) + 1)</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                    delegate:</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                        <a class="code" href="classRectangle.html">Rectangle</a> {</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                        <span class="keywordtype">id</span>: cell</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                        <span class="comment">/*anchors.fill:parent */</span> <span class="comment">/*hides the other cells*/</span></div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                        readonly <span class="keyword">property</span> real preferredW: (grid.width /7) - calendarGrid.columnSpacing</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                        readonly property real preferredH: (grid.height / (Math.ceil(calendarBase.currentMonthLength / 7) + 1)) - calendarGrid.RowSpacing</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                        readonly <span class="keyword">property</span> real minW: cellText.paintedWidth+3</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                        readonly <span class="keyword">property</span> real minH: cellText.paintedHeight+5</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                        Layout.minimumHeight: Math.min(cell.preferredH, cell.minH)</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                        Layout.minimumWidth: Math.min(cell.preferredW, cell.minW)</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                        Layout.preferredWidth: Math.max(cell.preferredW, cell.minW)</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                        Layout.preferredHeight: Math.max(cell.preferredH, cell.minH)</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                        readonly <span class="keyword">property</span> <span class="keywordtype">int</span> previousMonthLength: <span class="keyword">new</span> Date(currentYear, currentMonth, 0).getDate()</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                        readonly <span class="keyword">property</span> <span class="keywordtype">int</span> dayIndexInMonth : (index &lt; 7) ?  <span class="comment">/*1ère ligne (liste des jours de la semaine) ?*/</span></div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                                                                              0 : <span class="comment">/*pas de compteur*/</span></div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                                                                              (index - 7 - calendarBase.currentMonthFirstWeekday + 1) <span class="comment">/* sinon, on soustrait du compteur les 7 cases sans compteurs, puis de nouveau le nombre de colonnes de décalage avec le début du mois*/</span></div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;                        <span class="keyword">property</span> <span class="keywordtype">int</span> dayIndex: (index &lt; 7) ? <span class="comment">/* 1ère ligne (liste des jours de la semaine) ?*/</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                                                             0 : ( <span class="comment">/*pas de compteur*/</span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                                                                  (dayIndexInMonth &lt;= 0 ) ? <span class="comment">/* avant le début du mois ?*/</span></div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;                                                                                            (dayIndexInMonth + previousMonthLength) : ( <span class="comment">/* date dans le mois précédent*/</span></div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                                                                                                                                       (dayIndexInMonth &gt; currentMonthLength) ? <span class="comment">/* après la fin du mois ?*/</span></div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                                                                                                                                                                                (dayIndexInMonth - currentMonthLength) : <span class="comment">/*date dans le mois suivant (nombre de jours du mois suivant)*/</span></div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                                                                                                                                                                                dayIndexInMonth <span class="comment">/* sinon : date dans le mois*/</span></div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                                                                                                                                       )</div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                                                                  )</div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                        color: (index &lt; 7) ? <span class="stringliteral">&quot;white&quot;</span> :</div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                                             (dayIndexInMonth &lt;= 0 || dayIndexInMonth &gt; currentMonthLength) ? <span class="comment">/* en dehors du mois ?*/</span></div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                                                                                                              <span class="stringliteral">&quot;lightgrey&quot;</span> :</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                                                                                                              ((cell.dayIndexInMonth === calendarBase.currentDay) ? <span class="stringliteral">&quot;blue&quot;</span> : <span class="stringliteral">&quot;lightsteelblue&quot;</span>)</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                        border.width: 1</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                        border.color: <span class="stringliteral">&quot;darkblue&quot;</span></div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                        Text {</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                            <span class="keywordtype">id</span>: cellText</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                            text: (index &lt; 7) ? <span class="comment">/* 1ère ligne (liste des jours de la semaine) ?*/</span></div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                                                calendar.weekdaysList[(index+calendar.firstWeekdayIndex) % 7] :</div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;                                                cell.dayIndex.toString() <span class="comment">/*sinon le numéro de jour*/</span></div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                            horizontalAlignment: Text.AlignHCenter</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                            anchors.centerIn: cell</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                        }</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                        MouseArea {</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                            <span class="keywordtype">id</span>: cellArea</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                            anchors.fill: cell</div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                            onPressed: {</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;                                cell.color = <span class="stringliteral">&quot;lightblue&quot;</span>;</div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;                            }</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                            onReleased: {</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                                cell.color = (index &lt; 7) ? <span class="stringliteral">&quot;white&quot;</span> : ((cell.dayIndexInMonth === calendarBase.currentDay) ? <span class="stringliteral">&quot;blue&quot;</span> : <span class="stringliteral">&quot;lightsteelblue&quot;</span>);</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                            }</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                            onClicked: {</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                                var d = <span class="keyword">new</span> Date(calendarBase.currentYear, calendarBase.currentMonth, cellText.text);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                                calendar.clicked(d);</div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;                                calendar.selected(d.toLocaleDateString());</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                                calendar.closed();</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                            }</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                            onDoubleClicked: {</div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                                cellArea.clicked(mouse)</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                            }</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                        }</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                    }</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                }</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;            }</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;        }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;    }</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;}</div>
</div><!-- fragment --></div><!-- contents -->

<hr class="footer"/><address class="footer"><small>
Généré le Vendredi Juin 21 2013 15:25:30 pour PreCheck par &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.4
</small></address>
</body>
</html>
