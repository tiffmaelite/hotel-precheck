\hypertarget{SH__ConnexionPage_8qml}{\section{S\-H\-\_\-\-Connexion\-Page.\-qml}
\label{SH__ConnexionPage_8qml}\index{/home/tiff/\-Stage-\/\-I\-U\-T/app/simplhotel/hotel-\/precheck/src/\-Pre\-Check/views/qml/\-S\-H\-\_\-\-Connexion\-Page.\-qml@{/home/tiff/\-Stage-\/\-I\-U\-T/app/simplhotel/hotel-\/precheck/src/\-Pre\-Check/views/qml/\-S\-H\-\_\-\-Connexion\-Page.\-qml}}
}

\begin{DoxyCode}
00001 \textcolor{keyword}{import} QtQuick 2.1
00002 import QtQuick.Window 2.1
00003 import QtQuick.Controls 1.0
\hypertarget{SH__ConnexionPage_8qml_source_l00004}{}\hyperlink{classSH__ConnexionPage}{00004} import QtQuick.Controls.Styles 1.0
00005 import QtQuick.Layouts 1.0
00006 import PreCheck 1.0
00007 
00011 Item \{
00012     \textcolor{keywordtype}{id}: connexionPage
00013     signal reload()
00014     signal checkUsername(\textcolor{keywordtype}{string} name)
00015     signal logIn(\textcolor{keywordtype}{string} login, \textcolor{keywordtype}{string} password)
00016     signal loggedIn
00017 
00018     onCheckUsername: \{
00019         \textcolor{keywordflow}{if}(!App.userExists(name)) \{
00020             errorLabel.text=qsTr(\textcolor{stringliteral}{"Cet utilisateur n'existe pas"});
00021             errorLabel.visible = \textcolor{keyword}{true};
00022             login.textColor=\textcolor{stringliteral}{"darkred"};
00023         \}
00024     \}
00025 
00026     onLogIn: \{
00027         \textcolor{keywordflow}{if}(App.setUser(login, password)) \{
00028             errorLabel.visible=\textcolor{keyword}{false};
00029             errorLabel.text=\textcolor{stringliteral}{""};
00030             App.currentMode = AppMode.ACCUEIL;
00031             connexionPage.loggedIn();
00032         \} \textcolor{keywordflow}{else} \{
00033             errorLabel.text=qsTr(\textcolor{stringliteral}{"Le mot de passe entr√© est incorrect"});
00034             errorLabel.visible = \textcolor{keyword}{true};
00035         \}
00036     \}
00037 
00038     \hyperlink{classGridLayout}{GridLayout} \{
00039         anchors.centerIn: parent
00040         columns: 2
00041         columnSpacing: 10
00042         rowSpacing: 3
00043         Label \{
00044             \textcolor{keywordtype}{id}: errorLabel
00045             visible: \textcolor{keyword}{false}
00046             color: \textcolor{stringliteral}{"red"}
00047             font.pointSize: 15
00048             Layout.minimumHeight: paintedHeight+2
00049             Layout.minimumWidth: paintedWidth
00050             Layout.columnSpan: 2
00051         \}
00052         Label \{
00053             text: qsTr(\textcolor{stringliteral}{"Nom d'utilisateur"})
00054             Layout.minimumHeight: paintedHeight
00055         \}
00056         TextField \{
00057             \textcolor{keywordtype}{id}: login
00058             activeFocusOnPress: \textcolor{keyword}{true}
00059             onAccepted: \{
00060                 connexionPage.checkUsername(login.text);
00061                 password.forceActiveFocus();
00062             \}
00063             onFocusChanged: \{
00064                 \textcolor{keywordflow}{if}(!focus) \{
00065                     accepted();
00066                 \} \textcolor{keywordflow}{else} \{
00067                     textColor=\textcolor{stringliteral}{"black"};
00068                     errorLabel.text=\textcolor{stringliteral}{""};
00069                     errorLabel.visible = \textcolor{keyword}{false};
00070                 \}
00071             \}
00072 
00073             Layout.maximumHeight: 20
00074         \}
00075         Label \{
00076             text: qsTr(\textcolor{stringliteral}{"Mot de passe"})
00077             Layout.minimumHeight: paintedHeight
00078         \}
00079         TextField \{
00080             \textcolor{keywordtype}{id}:password
00081             echoMode: TextInput.Password
00082 
00083             Layout.maximumHeight: 20
00084             onFocusChanged: \{
00085                 \textcolor{keywordflow}{if}(!focus) \{
00086                     accepted();
00087                 \} \textcolor{keywordflow}{else} \{
00088                     errorLabel.text=\textcolor{stringliteral}{""};
00089                     errorLabel.visible = \textcolor{keyword}{false};
00090                 \}
00091             \}
00092         \}
00093         \hyperlink{classButton}{Button} \{
00094             text: qsTr(\textcolor{stringliteral}{"Connexion"})
00095             Layout.minimumHeight: childrenRect.height
00096             Layout.minimumWidth: childrenRect.width
00097             Layout.columnSpan: 2
00098             onClicked: \{
00099                 connexionPage.logIn(login.text, password.text);
00100                 login.text = \textcolor{stringliteral}{""};
00101                 password.text = \textcolor{stringliteral}{""};
00102             \}
00103         \}
00104     \}
00105 \}
\end{DoxyCode}
