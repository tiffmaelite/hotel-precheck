\hypertarget{SH__OutputZone_8qml}{\section{S\-H\-\_\-\-Output\-Zone.\-qml}
\label{SH__OutputZone_8qml}\index{/home/tiff/\-Stage-\/\-I\-U\-T/app/simplhotel/hotel-\/precheck/src/\-Pre\-Check/views/qml/\-S\-H\-\_\-\-Output\-Zone.\-qml@{/home/tiff/\-Stage-\/\-I\-U\-T/app/simplhotel/hotel-\/precheck/src/\-Pre\-Check/views/qml/\-S\-H\-\_\-\-Output\-Zone.\-qml}}
}

\begin{DoxyCode}
00001 \textcolor{keyword}{import} QtQuick 2.1
00002 import QtQuick.Window 2.1
00003 import QtQuick.Controls 1.0
\hypertarget{SH__OutputZone_8qml_source_l00004}{}\hyperlink{classSH__OutputZone}{00004} import QtQuick.Controls.Styles 1.0
00005 import QtQuick.Layouts 1.0
00006 import PreCheck 1.0
\hypertarget{SH__OutputZone_8qml_source_l00007}{}\hyperlink{classSH__OutputZone_ae324bcdd20ad4a9e435678d045964dc9}{00007} 
00011 Rectangle \{
00012     \textcolor{keywordtype}{id}: output
00013     visible: \textcolor{keyword}{true}
00014     color: \textcolor{stringliteral}{"snow"}
00015     \textcolor{keyword}{property} \textcolor{keywordtype}{int} lastVisibleRow: -1
00016 
00017     \textcolor{comment}{/*onLastVisibleRowChanged: \{}
00018 \textcolor{comment}{        if(output.lastVisibleRow < -1) \{}
00019 \textcolor{comment}{            output.lastVisibleRow = -1;}
00020 \textcolor{comment}{        \}}
00021 \textcolor{comment}{    \}*/}
00022 
00023     signal display(\textcolor{keywordtype}{string} text)
00024     signal displayNewFixed(\textcolor{keywordtype}{string} text)
00025     signal displayNew(\textcolor{keywordtype}{string} text, \textcolor{keywordtype}{bool} editable)
00026     signal replace(\textcolor{keywordtype}{string} text)
00027     signal selected(\textcolor{keywordtype}{string} selectedItem)
00028     signal selectedForDetail(var sqlDatas)
00029 
00030     onSelectedForDetail: \{
00031         \textcolor{keywordflow}{if}(output.lastVisibleRow < 0) \{
00032             output.lastVisibleRow = 0;
00033         \}
00034         rep.itemAt(output.lastVisibleRow).model = sqlDatas;
00035         rep.itemAt(output.lastVisibleRow).state=\textcolor{stringliteral}{"detail"};
00036     \}
00037 
00038     onReplace: \{
00039         \textcolor{keywordflow}{if}(output.lastVisibleRow > -1) \{
00040             \textcolor{keywordflow}{if}(rep.itemAt(output.lastVisibleRow).model === \textcolor{stringliteral}{""}) \{
00041                 output.lastVisibleRow = Math.max(0, output.lastVisibleRow-1);
00042             \}
00043             console.log(text);
00044             \textcolor{keywordflow}{if}(text!==\textcolor{stringliteral}{""}) \{
00045                 layout.changeTextDisplay(output.lastVisibleRow,text, rep.itemAt(output.lastVisibleRow).
      editable);
00046             \} \textcolor{keywordflow}{else} \{
00047                 display(text);
00048             \}
00049         \} \textcolor{keywordflow}{else} \{
00050             displayNewFixed(text);
00051         \}
00052     \}
00053     onDisplay: layout.continueTextDisplay(output.lastVisibleRow,text);
00054     onDisplayNew: layout.changeTextDisplay(output.lastVisibleRow+1,text, editable);
00055     onDisplayNewFixed: output.displayNew(text, \textcolor{keyword}{false});
00056 
00065     \textcolor{keyword}{function} clear(row) \{
00066         \textcolor{keywordflow}{if}(row <= output.lastVisibleRow) \{
00067             \textcolor{keywordflow}{if}(rep.itemAt(row).model !== \textcolor{stringliteral}{""}) \{
00068                 rep.itemAt(row).model = \textcolor{stringliteral}{""};
00069             \} \textcolor{keywordflow}{else} \{
00070                 \textcolor{keywordflow}{if}(row === output.lastVisibleRow) \{
00071                     output.lastVisibleRow = -1;
00072                 \}
00073                 clear(row-1);
00074             \}
00075         \}
00076     \}
00085     \textcolor{keyword}{function} clearAll() \{
00086         \textcolor{keywordflow}{for}(var currentRow = 0; currentRow<rep.count; currentRow++) \{
00087             output.clear(currentRow);
00088         \}
00089         output.lastVisibleRow = -1;
00090     \}
00099     \textcolor{keyword}{function} displayText(text) \{
00100         layout.changeTextDisplay(output.lastVisibleRow+1,text, \textcolor{keyword}{false});
00101     \}
00109     \textcolor{keyword}{function} displayCalendar() \{
00110         \textcolor{keywordflow}{if}(output.lastVisibleRow < 0) \{
00111             output.lastVisibleRow = 0;
00112         \}
00113         \textcolor{comment}{/*TODO*/}
00114     \}
00115 
00116     signal displaySqlDatas(variant sqlData);
00117     onDisplaySqlDatas: \{
00118         \textcolor{keywordflow}{if}(output.lastVisibleRow < 0) \{
00119             output.lastVisibleRow = 0;
00120         \}
00121         rep.itemAt(output.lastVisibleRow).model = sqlData;
00122         rep.itemAt(output.lastVisibleRow).state=\textcolor{stringliteral}{"choices"};
00123     \}
00124 
00125 
00126     ColumnLayout \{
00127         \textcolor{keywordtype}{id}:layout
00128         anchors.margins: 5
00129         anchors.fill: output
00130         height: output.height
00131         width: output.width
00140         \textcolor{keyword}{function} changeTextDisplay(row, text, editable) \{
00141             \textcolor{keywordflow}{if}(text!==\textcolor{stringliteral}{""}) \{
00142                 console.log(\textcolor{stringliteral}{"change text at "}+row+\textcolor{stringliteral}{" with "}+text);
00143                 \textcolor{keywordflow}{if}(row < rep.count) \{
00144                     \textcolor{comment}{/*if(rep.itemAt(row-1).model === "") \{}
00145 \textcolor{comment}{                    row--;}
00146 \textcolor{comment}{                \}*/}
00147                     \textcolor{keywordflow}{if}(row > output.lastVisibleRow) \{
00148                         \textcolor{comment}{//output.lastVisibleRow = Math.max(0, row);}
00149                         output.lastVisibleRow = row;
00150                     \}
00151                     rep.itemAt(row).editable = editable;
00152                     rep.itemAt(row).model = text;
00153                 \}
00154             \}
00155         \}
00164         \textcolor{keyword}{function} continueTextDisplay(row, text) \{
00165             console.log(\textcolor{stringliteral}{"continue text at "}+row+\textcolor{stringliteral}{" with "}+text);
00166             \textcolor{keywordflow}{if}(output.lastVisibleRow<0) \{
00167                 output.lastVisibleRow=0;
00168             \}
00169 
00170             \textcolor{keywordflow}{if}(row < 0) \{
00171                 console.log(\textcolor{stringliteral}{"row < 0"});
00172                 layout.changeTextDisplay(row+1, text, \textcolor{keyword}{false});
00173             \} \textcolor{keywordflow}{else} \{
00174                 \textcolor{comment}{/*if(rep.itemAt(row-1).model === "") \{}
00175 \textcolor{comment}{                    row--;}
00176 \textcolor{comment}{                \}*/}
00177                 \textcolor{keywordflow}{if}(row > output.lastVisibleRow) \{
00178                     console.log(\textcolor{stringliteral}{"row > "}+output.lastVisibleRow);
00179                     layout.changeTextDisplay(output.lastVisibleRow, text, \textcolor{keyword}{false});
00180                 \} \textcolor{keywordflow}{else} \{
00181                     console.log(\textcolor{stringliteral}{"row <= 0"});
00182                     \textcolor{keywordflow}{if}(row >= rep.count) \{
00183                         row = rep.count-1;
00184                     \}
00185                     rep.itemAt(row).model = rep.itemAt(row).model+text;
00186                 \}
00187             \}
00188         \}
00189 
00190         Repeater \{
00191             \textcolor{keywordtype}{id}: rep
00192             model: 25
00193             delegate:
00194                 RowLayout \{
00195                 \textcolor{keywordtype}{id}: row
00196                 \textcolor{keyword}{property} var model: \textcolor{stringliteral}{""}
00197                 \textcolor{keyword}{property} \textcolor{keywordtype}{bool} editable: \textcolor{keyword}{true}
00198                 Layout.minimumHeight: layout.height / rep.model - layout.spacing -layout.anchors.margins
00199                 Layout.minimumWidth: layout.width-layout.anchors.margins
00200                 Layout.fillWidth: \textcolor{keyword}{true}
00201                 Layout.fillHeight: \textcolor{keyword}{true}
00202                 visible: \textcolor{keyword}{true}
00203                 state: \textcolor{stringliteral}{"text"}
00204                 states: [
00205                     State\{
00206                         name: \textcolor{stringliteral}{"text"}
00207                         PropertyChanges \{
00208                             target: defaultContent
00209                             text: row.model
00210                             readOnly:  !row.editable
00211                             visible: \textcolor{keyword}{true}
00212                         \}
00213                         PropertyChanges \{
00214                             target: choiceContent
00215                             model: 0
00216                             visible: \textcolor{keyword}{false}
00217                         \}
00218                         \textcolor{comment}{/*PropertyChanges \{}
00219 \textcolor{comment}{                            target: calendarContent}
00220 \textcolor{comment}{                            visible: false}
00221 \textcolor{comment}{                        \}*/}
00222                         PropertyChanges \{
00223                             target: detailedContent
00224                             model: 0
00225                             visible: \textcolor{keyword}{false}
00226                         \}
00227                     \},
00228                     State\{
00229                         name: \textcolor{stringliteral}{"choices"}
00230                         PropertyChanges \{
00231                             target: defaultContent
00232                             visible: \textcolor{keyword}{false}
00233                         \}
00234                         PropertyChanges \{
00235                             target: choiceContent
00236                             model: row.model===\textcolor{stringliteral}{""}? 0  : row.model
00237                             visible: \textcolor{keyword}{true}
00238                         \}
00239                         \textcolor{comment}{/*PropertyChanges \{}
00240 \textcolor{comment}{                            target: calendarContent}
00241 \textcolor{comment}{                            visible: false}
00242 \textcolor{comment}{                        \}*/}
00243                         PropertyChanges \{
00244                             target: detailedContent
00245                             model: 0
00246                             visible: \textcolor{keyword}{false}
00247                         \}
00248                     \},
00249                     State\{
00250                         name: \textcolor{stringliteral}{"choices"}
00251                         PropertyChanges \{
00252                             target: defaultContent
00253                             visible: \textcolor{keyword}{false}
00254                         \}
00255                         PropertyChanges \{
00256                             target: detailedContent
00257                             model: row.model===\textcolor{stringliteral}{""}? 0  : row.model
00258                             visible: \textcolor{keyword}{true}
00259                         \}
00260                         \textcolor{comment}{/*PropertyChanges \{}
00261 \textcolor{comment}{                            target: calendarContent}
00262 \textcolor{comment}{                            visible: false}
00263 \textcolor{comment}{                        \}*/}
00264                         PropertyChanges \{
00265                             target: choiceContent
00266                             model: 0
00267                             visible: \textcolor{keyword}{false}
00268                         \}
00269                     \}
00270                 ]
00271                 Column \{
00272                     TextEdit \{
00273                         \textcolor{keywordtype}{id}: defaultContent
00274                         readOnly:  !row.editable
00275                         wrapMode: TextEdit.Wrap;
00276                         Layout.fillHeight: \textcolor{keyword}{true}
00277                         Layout.fillWidth: \textcolor{keyword}{true}
00278                         font.pointSize: 12
00279                         color: defaultContent.readOnly ? \textcolor{stringliteral}{"gray"} : \textcolor{stringliteral}{"dimgray"}
00280                     \}
00281                     \hyperlink{classSH__ContentView}{SH\_ContentView} \{
00282                         \textcolor{keywordtype}{id}: choiceContent
00283                         model: 0
00284                         Layout.fillHeight: \textcolor{keyword}{true}
00285                         Layout.fillWidth: \textcolor{keyword}{true}
00286                     \}
00287                     \hyperlink{classTableView}{TableView} \{
00288                         \textcolor{keywordtype}{id}: detailedContent
00289                         model: 0
00290                         Layout.fillHeight: \textcolor{keyword}{true}
00291                         Layout.fillWidth: \textcolor{keyword}{true}
00292                     \}
00293 
00294                     \textcolor{comment}{/*SH\_CalendarDialog \{}
00295 \textcolor{comment}{                        id: calendarContent}
00296 \textcolor{comment}{                        Layout.fillHeight: true}
00297 \textcolor{comment}{                        Layout.fillWidth: true}
00298 \textcolor{comment}{                    \}*/}
00299                 \}
00300             \}
00301         \}
00302     \}
00303 \}
\end{DoxyCode}
