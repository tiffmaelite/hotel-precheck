\hypertarget{SH__ExtendedQQmlAction_8cpp}{\section{S\-H\-\_\-\-Extended\-Q\-Qml\-Action.\-cpp}
\label{SH__ExtendedQQmlAction_8cpp}\index{/home/tiff/\-Stage-\/\-I\-U\-T/app/simplhotel/hotel-\/precheck/src/\-Pre\-Check/views/\-S\-H\-\_\-\-Extended\-Q\-Qml\-Action.\-cpp@{/home/tiff/\-Stage-\/\-I\-U\-T/app/simplhotel/hotel-\/precheck/src/\-Pre\-Check/views/\-S\-H\-\_\-\-Extended\-Q\-Qml\-Action.\-cpp}}
}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#include <QtGui/QGuiApplication>}
00002 \textcolor{preprocessor}{#include <QtQuick/QQuickItem>}
00003 \textcolor{preprocessor}{#include <QtQuick/QQuickWindow>}
00004 \textcolor{preprocessor}{#include <QQmlFile>}
00005 \textcolor{preprocessor}{#include "\hyperlink{SH__ExtendedQQmlAction_8h}{SH\_ExtendedQQmlAction.h}"}
00006 \textcolor{comment}{/*namespace SimplHotel}
00007 \textcolor{comment}{\{*/}
\hypertarget{SH__ExtendedQQmlAction_8cpp_source_l00012}{}\hyperlink{classSH__ExtendedQQmlAction_aaecd8af53387938e1d1478f7c1c8f566}{00012} \hyperlink{classSH__ExtendedQQmlAction_aaecd8af53387938e1d1478f7c1c8f566}{SH\_ExtendedQQmlAction::SH\_ExtendedQQmlAction}(
      \hyperlink{classQObject}{QObject} *parent)
00013     : \hyperlink{classQObject}{QObject}(parent)
00014     , m\_enabled(true)
00015 \{
00016 \}
\hypertarget{SH__ExtendedQQmlAction_8cpp_source_l00021}{}\hyperlink{classSH__ExtendedQQmlAction_a03c5eae20747d7a8b444c7939d2ab262}{00021} \hyperlink{classSH__ExtendedQQmlAction_a03c5eae20747d7a8b444c7939d2ab262}{SH\_ExtendedQQmlAction::~SH\_ExtendedQQmlAction}()
00022 \{
00023     \hyperlink{classSH__ExtendedQQmlAction_aef8b6648357a2ea81a477e134ca885fa}{setKeyShortcut}(Qt::Key\_unknown);
00024     \hyperlink{classSH__ExtendedQQmlAction_a717e828cb0341e3d77eabe05e6143032}{setMnemonicFromText}(QString());
00025 \}
\hypertarget{SH__ExtendedQQmlAction_8cpp_source_l00030}{}\hyperlink{classSH__ExtendedQQmlAction_a2071b7b2ea7583a21553b28b4be814ef}{00030} \textcolor{keywordtype}{void} \hyperlink{classSH__ExtendedQQmlAction_a2071b7b2ea7583a21553b28b4be814ef}{SH\_ExtendedQQmlAction::setText}(\textcolor{keyword}{const} QString &text)
00031 \{
00032     \textcolor{keywordflow}{if} (text == \hyperlink{classSH__ExtendedQQmlAction_a8fd83c5e68691a582fa7e0c62d661c71}{m\_text})
00033     \textcolor{keywordflow}{return};
00034     \hyperlink{classSH__ExtendedQQmlAction_a8fd83c5e68691a582fa7e0c62d661c71}{m\_text} = \hyperlink{classSH__ExtendedQQmlAction_a827915b0ce23a1af60d9aaaf7d052447}{text};
00035     \hyperlink{classSH__ExtendedQQmlAction_a717e828cb0341e3d77eabe05e6143032}{setMnemonicFromText}(\hyperlink{classSH__ExtendedQQmlAction_a8fd83c5e68691a582fa7e0c62d661c71}{m\_text});
00036     emit \hyperlink{classSH__ExtendedQQmlAction_af07f0daeecec4f12d65bf084e83cc305}{textChanged}();
00037 \}
\hypertarget{SH__ExtendedQQmlAction_8cpp_source_l00042}{}\hyperlink{SH__ExtendedQQmlAction_8cpp_a209127c14b6e1470f87b7fec1ee04537}{00042} \textcolor{keywordtype}{bool} \hyperlink{SH__ExtendedQQmlAction_8cpp_a209127c14b6e1470f87b7fec1ee04537}{qShortcutContextMatcher}(\hyperlink{classQObject}{QObject} *o, Qt::ShortcutContext context)
00043 \{
00044     \textcolor{keywordflow}{switch} (context) \{
00045     \textcolor{keywordflow}{case} Qt::ApplicationShortcut:
00046     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
00047     \textcolor{keywordflow}{case} Qt::WindowShortcut: \{
00048     \hyperlink{classQObject}{QObject} *w = o;
00049     \textcolor{keywordflow}{while} (w && !w->isWindowType()) \{
00050     w = w->parent();
00051     \textcolor{keywordflow}{if} (\hyperlink{classQQuickItem}{QQuickItem} * item = qobject\_cast<QQuickItem*>(w))
00052     w = item->window();
00053     \}
00054     \textcolor{keywordflow}{if} (w && w == QGuiApplication::focusWindow())
00055     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
00056     \}
00057     \textcolor{keywordflow}{case} Qt::WidgetShortcut:
00058     \textcolor{keywordflow}{case} Qt::WidgetWithChildrenShortcut:
00059     \textcolor{keywordflow}{break};
00060     \}
00061     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
00062 \}
\hypertarget{SH__ExtendedQQmlAction_8cpp_source_l00067}{}\hyperlink{classSH__ExtendedQQmlAction_a7d624821268cc19aa44bcda3cd85b967}{00067} \textcolor{keywordtype}{void} \hyperlink{classSH__ExtendedQQmlAction_a7d624821268cc19aa44bcda3cd85b967}{SH\_ExtendedQQmlAction::setKeySequence}(\textcolor{keyword}{const} QKeySequence &
      sequence) \{
00068     \textcolor{keywordflow}{if} (sequence == \hyperlink{classSH__ExtendedQQmlAction_ac84d3a2113efb715321b905580b08bc5}{m\_shortcut})
00069     \textcolor{keywordflow}{return};
00070     
00071 \textcolor{comment}{/*if (!m\_shortcut.isEmpty())}
00072 \textcolor{comment}{    QGuiApplicationPrivate::instance()->shortcutMap.removeShortcut(0, this, m\_shortcut);}
00073 \textcolor{comment}{    */}
00074     \hyperlink{classSH__ExtendedQQmlAction_ac84d3a2113efb715321b905580b08bc5}{m\_shortcut} = sequence;
00075     
00076 \textcolor{comment}{/*if (!m\_shortcut.isEmpty()) \{}
00077 \textcolor{comment}{    Qt::ShortcutContext context = Qt::WindowShortcut;}
00078 \textcolor{comment}{    QGuiApplicationPrivate::instance()->shortcutMap.addShortcut(this, m\_shortcut, context,
       qShortcutContextMatcher);}
00079 \textcolor{comment}{    \}*/}
00080     emit \hyperlink{classSH__ExtendedQQmlAction_a2db5d52edf0a362a13971ebc04b870c1}{shortcutChanged}(\hyperlink{classSH__ExtendedQQmlAction_a070cac95bfc43b184ca1f0a75592877b}{shortcut}());
00081 \}
\hypertarget{SH__ExtendedQQmlAction_8cpp_source_l00086}{}\hyperlink{classSH__ExtendedQQmlAction_aef8b6648357a2ea81a477e134ca885fa}{00086} \textcolor{keywordtype}{void} \hyperlink{classSH__ExtendedQQmlAction_aef8b6648357a2ea81a477e134ca885fa}{SH\_ExtendedQQmlAction::setKeyShortcut}(\textcolor{keyword}{const} Qt::Key &shortcut)
00087 \{
00088     \hyperlink{classSH__ExtendedQQmlAction_a7d624821268cc19aa44bcda3cd85b967}{setKeySequence}(QKeySequence(shortcut));
00089 \}
00094 QString \hyperlink{classSH__ExtendedQQmlAction_a070cac95bfc43b184ca1f0a75592877b}{SH\_ExtendedQQmlAction::shortcut}()\textcolor{keyword}{ const}
00095 \textcolor{keyword}{}\{
00096     \textcolor{keywordflow}{return} \hyperlink{classSH__ExtendedQQmlAction_ac84d3a2113efb715321b905580b08bc5}{m\_shortcut}.toString(QKeySequence::NativeText);
00097 \}
\hypertarget{SH__ExtendedQQmlAction_8cpp_source_l00102}{}\hyperlink{classSH__ExtendedQQmlAction_a3e731c850a34194354e6e043dc249a39}{00102} \textcolor{keywordtype}{void} \hyperlink{classSH__ExtendedQQmlAction_a3e731c850a34194354e6e043dc249a39}{SH\_ExtendedQQmlAction::setShortcut}(\textcolor{keyword}{const} QString &arg)
00103 \{
00104     \textcolor{keywordflow}{if}(\hyperlink{classSH__ExtendedQQmlAction_a070cac95bfc43b184ca1f0a75592877b}{shortcut}() == arg)
00105     \textcolor{keywordflow}{return};
00106     \hyperlink{classSH__ExtendedQQmlAction_a7d624821268cc19aa44bcda3cd85b967}{setKeySequence}(QKeySequence::fromString(arg));
00107 \}
\hypertarget{SH__ExtendedQQmlAction_8cpp_source_l00112}{}\hyperlink{classSH__ExtendedQQmlAction_a717e828cb0341e3d77eabe05e6143032}{00112} \textcolor{keywordtype}{void} \hyperlink{classSH__ExtendedQQmlAction_a717e828cb0341e3d77eabe05e6143032}{SH\_ExtendedQQmlAction::setMnemonicFromText}(\textcolor{keyword}{const} QString &
      text)
00113 \{
00114     QKeySequence sequence = QKeySequence::mnemonic(text);
00115     \textcolor{keywordflow}{if} (\hyperlink{classSH__ExtendedQQmlAction_a7c924c07aa50a7228b6e8f31c4520896}{m\_mnemonic} == sequence)
00116     \textcolor{keywordflow}{return};
00117     
00118 \textcolor{comment}{/*if (!m\_mnemonic.isEmpty())}
00119 \textcolor{comment}{    QGuiApplicationPrivate::instance()->shortcutMap.removeShortcut(0, this, m\_mnemonic);}
00120 \textcolor{comment}{    */}
00121     \hyperlink{classSH__ExtendedQQmlAction_a7c924c07aa50a7228b6e8f31c4520896}{m\_mnemonic} = sequence;
00122     
00123 \textcolor{comment}{/*if (!m\_mnemonic.isEmpty()) \{}
00124 \textcolor{comment}{    Qt::ShortcutContext context = Qt::WindowShortcut;}
00125 \textcolor{comment}{    QGuiApplicationPrivate::instance()->shortcutMap.addShortcut(this, m\_mnemonic, context,
       qShortcutContextMatcher);}
00126 \textcolor{comment}{    \}*/}
00127 \}
\hypertarget{SH__ExtendedQQmlAction_8cpp_source_l00132}{}\hyperlink{classSH__ExtendedQQmlAction_ae34fe314ba335d65d99932b27f1404f7}{00132} \textcolor{keywordtype}{void} \hyperlink{classSH__ExtendedQQmlAction_ae34fe314ba335d65d99932b27f1404f7}{SH\_ExtendedQQmlAction::setIconSource}(\textcolor{keyword}{const} QUrl &iconSource)
00133 \{
00134     \textcolor{keywordflow}{if} (iconSource == \hyperlink{classSH__ExtendedQQmlAction_a61c8633eab1fa3b69752074220e785fc}{m\_iconSource})
00135     \textcolor{keywordflow}{return};
00136     \hyperlink{classSH__ExtendedQQmlAction_a61c8633eab1fa3b69752074220e785fc}{m\_iconSource} = \hyperlink{classSH__ExtendedQQmlAction_a4256635783087124d3df6fa9726e7d55}{iconSource};
00137     \textcolor{keywordflow}{if} (\hyperlink{classSH__ExtendedQQmlAction_a3375d1504e5ec862ed05500bf529d95c}{m\_iconName}.isEmpty() || \hyperlink{classSH__ExtendedQQmlAction_a4386f56e28c2c70cfedd16c1d8c2c4a4}{m\_icon}.isNull()) \{
00138     QString fileString = QQmlFile::urlToLocalFileOrQrc(iconSource);
00139     \hyperlink{classSH__ExtendedQQmlAction_a4386f56e28c2c70cfedd16c1d8c2c4a4}{m\_icon} = QIcon(fileString);
00140     emit \hyperlink{classSH__ExtendedQQmlAction_adb8e4632768121ebabc5a402f6307c8d}{iconChanged}();
00141     \}
00142     emit \hyperlink{classSH__ExtendedQQmlAction_a9f174f4cba5993805b89c2b310f0c5dc}{iconSourceChanged}();
00143 \}
00148 QString \hyperlink{classSH__ExtendedQQmlAction_afaa301943c53a8689ec5447560ffc97f}{SH\_ExtendedQQmlAction::iconName}()\textcolor{keyword}{ const}
00149 \textcolor{keyword}{}\{
00150     \textcolor{keywordflow}{return} \hyperlink{classSH__ExtendedQQmlAction_a3375d1504e5ec862ed05500bf529d95c}{m\_iconName};
00151 \}
\hypertarget{SH__ExtendedQQmlAction_8cpp_source_l00156}{}\hyperlink{classSH__ExtendedQQmlAction_a348526d65cd47b4ea6378e2a62065135}{00156} \textcolor{keywordtype}{void} \hyperlink{classSH__ExtendedQQmlAction_a348526d65cd47b4ea6378e2a62065135}{SH\_ExtendedQQmlAction::setIconName}(\textcolor{keyword}{const} QString &iconName)
00157 \{
00158     \textcolor{keywordflow}{if} (iconName == \hyperlink{classSH__ExtendedQQmlAction_a3375d1504e5ec862ed05500bf529d95c}{m\_iconName})
00159     \textcolor{keywordflow}{return};
00160     \hyperlink{classSH__ExtendedQQmlAction_a3375d1504e5ec862ed05500bf529d95c}{m\_iconName} = \hyperlink{classSH__ExtendedQQmlAction_afaa301943c53a8689ec5447560ffc97f}{iconName};
00161     \hyperlink{classSH__ExtendedQQmlAction_a4386f56e28c2c70cfedd16c1d8c2c4a4}{m\_icon} = QIcon::fromTheme(\hyperlink{classSH__ExtendedQQmlAction_a3375d1504e5ec862ed05500bf529d95c}{m\_iconName}, QIcon(QQmlFile::urlToLocalFileOrQrc(
      \hyperlink{classSH__ExtendedQQmlAction_a61c8633eab1fa3b69752074220e785fc}{m\_iconSource})));
00162     emit \hyperlink{classSH__ExtendedQQmlAction_a32deffc45767f5c61949c445ca018156}{iconNameChanged}();
00163     emit \hyperlink{classSH__ExtendedQQmlAction_adb8e4632768121ebabc5a402f6307c8d}{iconChanged}();
00164 \}
\hypertarget{SH__ExtendedQQmlAction_8cpp_source_l00169}{}\hyperlink{classSH__ExtendedQQmlAction_a8c90255e9b7a957e82de4cae2226d3f8}{00169} \textcolor{keywordtype}{void} \hyperlink{classSH__ExtendedQQmlAction_a8c90255e9b7a957e82de4cae2226d3f8}{SH\_ExtendedQQmlAction::setTooltip}(\textcolor{keyword}{const} QString &arg)
00170 \{
00171     \textcolor{keywordflow}{if} (\hyperlink{classSH__ExtendedQQmlAction_af04bb6a8446dcd4701a98fc667be693f}{m\_tooltip} != arg) \{
00172     \hyperlink{classSH__ExtendedQQmlAction_af04bb6a8446dcd4701a98fc667be693f}{m\_tooltip} = arg;
00173     emit \hyperlink{classSH__ExtendedQQmlAction_a79b7c4c9e03e3b18a16f1fc14a6e8342}{tooltipChanged}(arg);
00174     \}
00175 \}
\hypertarget{SH__ExtendedQQmlAction_8cpp_source_l00180}{}\hyperlink{classSH__ExtendedQQmlAction_aff39518e3dbf185d6b91f827521fa358}{00180} \textcolor{keywordtype}{void} \hyperlink{classSH__ExtendedQQmlAction_aff39518e3dbf185d6b91f827521fa358}{SH\_ExtendedQQmlAction::setEnabled}(\textcolor{keywordtype}{bool} e)
00181 \{
00182     \textcolor{keywordflow}{if} (e == \hyperlink{classSH__ExtendedQQmlAction_ad93920806001da9e32b7b2a3d3d9213e}{m\_enabled})
00183     \textcolor{keywordflow}{return};
00184     \hyperlink{classSH__ExtendedQQmlAction_ad93920806001da9e32b7b2a3d3d9213e}{m\_enabled} = e;
00185     emit \hyperlink{classSH__ExtendedQQmlAction_aa4caaf211f7f26e0d670929b998efb97}{enabledChanged}();
00186 \}
\hypertarget{SH__ExtendedQQmlAction_8cpp_source_l00192}{}\hyperlink{classSH__ExtendedQQmlAction_a218053d85e9fc54e06ab39b1bb37dd4b}{00192} \textcolor{keywordtype}{bool} \hyperlink{classSH__ExtendedQQmlAction_a218053d85e9fc54e06ab39b1bb37dd4b}{SH\_ExtendedQQmlAction::event}(QEvent *e)
00193 \{
00194     \textcolor{keywordflow}{if} (!\hyperlink{classSH__ExtendedQQmlAction_ad93920806001da9e32b7b2a3d3d9213e}{m\_enabled})
00195     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
00196     \textcolor{keywordflow}{if} (e->type() != QEvent::Shortcut)
00197     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
00198     QShortcutEvent *se = \textcolor{keyword}{static\_cast<}QShortcutEvent *\textcolor{keyword}{>}(e);
00199     Q\_ASSERT\_X(se->key() == \hyperlink{classSH__ExtendedQQmlAction_ac84d3a2113efb715321b905580b08bc5}{m\_shortcut} || se->key() == \hyperlink{classSH__ExtendedQQmlAction_a7c924c07aa50a7228b6e8f31c4520896}{m\_mnemonic},
00200     \textcolor{stringliteral}{"QQQuickAction::event"},
00201     \textcolor{stringliteral}{"Received shortcut event from incorrect shortcut"});
00202     \textcolor{keywordflow}{if} (se->isAmbiguous()) \{
00203     qWarning(\textcolor{stringliteral}{"QQQuickAction::event: Ambiguous shortcut overload: %s"}, se->key().toString(
      QKeySequence::NativeText).toLatin1().constData());
00204     \textcolor{keywordflow}{return} \textcolor{keyword}{false};
00205     \}
00206     \hyperlink{classSH__ExtendedQQmlAction_abf79bb6cb923d27e2fc5dfc05ff513c2}{trigger}();
00207     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
00208 \}
\hypertarget{SH__ExtendedQQmlAction_8cpp_source_l00213}{}\hyperlink{classSH__ExtendedQQmlAction_abf79bb6cb923d27e2fc5dfc05ff513c2}{00213} \textcolor{keywordtype}{void} \hyperlink{classSH__ExtendedQQmlAction_abf79bb6cb923d27e2fc5dfc05ff513c2}{SH\_ExtendedQQmlAction::trigger}()
00214 \{
00215     \textcolor{keywordflow}{if} (!\hyperlink{classSH__ExtendedQQmlAction_ad93920806001da9e32b7b2a3d3d9213e}{m\_enabled})
00216     \textcolor{keywordflow}{return};
00217     emit \hyperlink{classSH__ExtendedQQmlAction_a94a8d72f8d53e12ded7db5b8f6ed6db0}{triggered}();
00218 \}
00219 \textcolor{comment}{/*\}*/}
\end{DoxyCode}
