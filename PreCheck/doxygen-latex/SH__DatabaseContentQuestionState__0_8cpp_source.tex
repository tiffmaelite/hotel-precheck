\hypertarget{SH__DatabaseContentQuestionState__0_8cpp}{\section{S\-H\-\_\-\-Database\-Content\-Question\-State\-\_\-0.\-cpp}
\label{SH__DatabaseContentQuestionState__0_8cpp}\index{/home/tiff/\-Stage-\/\-I\-U\-T/app/simplhotel/hotel-\/precheck/src/\-Pre\-Check/logic/\-S\-H\-\_\-\-Database\-Content\-Question\-State\-\_\-0.\-cpp@{/home/tiff/\-Stage-\/\-I\-U\-T/app/simplhotel/hotel-\/precheck/src/\-Pre\-Check/logic/\-S\-H\-\_\-\-Database\-Content\-Question\-State\-\_\-0.\-cpp}}
}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#include "\hyperlink{SH__DatabaseContentQuestionState_8h}{SH\_DatabaseContentQuestionState.h}"}
00002 \textcolor{preprocessor}{#include "\hyperlink{SH__SqlDataModel_8h}{models/SH\_SqlDataModel.h}"}
00003 
00015 \hyperlink{classSH__DatabaseContentQuestionState_ab26490ea519262a8f9ca72c000bf7313}{SH\_DatabaseContentQuestionState::SH\_DatabaseContentQuestionState}
      (QString question, QString name, QString databaseTable, QString tableField, QString databaseCondition, 
      \hyperlink{classQState}{QState} *parent) :
00016     \hyperlink{classSH__QuestionState}{SH\_QuestionState}(question, name, parent), m\_table(databaseTable), m\_condition(
      databaseCondition), m\_field(tableField)
00017 \{
00018     qDebug() << \textcolor{stringliteral}{"multiple choice list with datas from "} << databaseTable << \textcolor{stringliteral}{"!"};
00019     \hyperlink{classSH__SqlDataModel}{SH\_SqlDataModel} *sqlDatas = \textcolor{keyword}{new} \hyperlink{classSH__SqlDataModel}{SH\_SqlDataModel}();
00020     QStringList fields;
00021     fields << \textcolor{stringliteral}{"ID"} << \hyperlink{classSH__DatabaseContentQuestionState_a32b3f4f2cadbc4837add2556c1a926d4}{m\_field};
00022     sqlDatas->\hyperlink{classSH__SqlDataModel_ab6c206088250a66ddc8cb8d33a38e421}{fetch}(\hyperlink{classSH__DatabaseContentQuestionState_a95d8a6ffc051cd9283314a56f7a11296}{m\_table}, \hyperlink{classSH__DatabaseContentQuestionState_aaffd467fccc69b6d46194f04831a1edc}{m\_condition}, \textcolor{stringliteral}{""}, fields);
00023     QVariantMap results = sqlDatas->\hyperlink{classSH__SqlDataModel_a24db284b370930b57e2261a7a72e2da8}{datas}();
00024     QVariantList idValues = results.values(\textcolor{stringliteral}{"ID"});
00025     QVariantList fieldsValues = results.values(m\_field);
00026     \textcolor{keywordflow}{for}(\textcolor{keywordtype}{int} i = 0; i < idValues.length(); i++) \{
00027         qDebug() << \textcolor{stringliteral}{"new choice "} << idValues.at(i).toString() <<  \textcolor{stringliteral}{": "} << fieldsValues.at(i).toString();
00028         \hyperlink{classSH__DatabaseContentQuestionState_a0045a4afd3731c6f666887adc1f3b7a1}{m\_choices}.insert(idValues.at(i).toInt(), fieldsValues.at(i));
00029     \}
00030 \}
00031 
00038 \textcolor{keywordtype}{bool} \hyperlink{classSH__DatabaseContentQuestionState_a9262aeba84c1bb7feff540ca5edb27a7}{SH\_DatabaseContentQuestionState::isAnswerValid}(\textcolor{keyword}{const} 
      QVariant &givenAnswer)
00039 \{
00040     \textcolor{comment}{/*qDebug() << m\_choices.values();}
00041 \textcolor{comment}{    return m\_choices.isEmpty() || m\_choices.values().contains(givenAnswer);*/}
00042     \textcolor{keywordflow}{return} \textcolor{keyword}{true};
00043 \}
00044 
00050 \textcolor{keywordtype}{void} \hyperlink{classSH__DatabaseContentQuestionState_aff932cdd7974baeea9a477cf0abc5ace}{SH\_DatabaseContentQuestionState::setOutput}(\textcolor{keyword}{const} QString &
      output)
00051 \{
00052     \hyperlink{classSH__InOutState_af611c84134e262739cd834797b315c80}{SH\_QuestionState::setOutput}(output);
00053     \textcolor{keywordflow}{if}(\hyperlink{classSH__DatabaseContentQuestionState_a0045a4afd3731c6f666887adc1f3b7a1}{m\_choices}.size() < 8) \{
00054         \hyperlink{classSH__DatabaseContentQuestionState_aff4d8f402d9299029038ec4f21271b2b}{m\_choicesDisplayed} = \textcolor{keyword}{true};
00055         \textcolor{comment}{//emit displayChoiceList();}
00056     \}
00057 \}
00058 
00064 QVariant \hyperlink{classSH__DatabaseContentQuestionState_a344d9109e15509506b1b998d28392cac}{SH\_DatabaseContentQuestionState::rawInput}()\textcolor{keyword}{ const}
00065 \textcolor{keyword}{}\{
00066     \textcolor{comment}{//return m\_choices.key(this->givenAnswer());}
00067     \textcolor{keywordflow}{return} QVariant();
00068 \}
00069 
00075 QVariantList \hyperlink{classSH__DatabaseContentQuestionState_a9a121a43b672118d36f6a1a709dfdb50}{SH\_DatabaseContentQuestionState::choiceList}() \{
00076     \textcolor{keywordflow}{if}(\hyperlink{classSH__DatabaseContentQuestionState_aff4d8f402d9299029038ec4f21271b2b}{m\_choicesDisplayed}) \{
00077         \textcolor{keywordflow}{return} \hyperlink{classSH__DatabaseContentQuestionState_a0045a4afd3731c6f666887adc1f3b7a1}{m\_choices};
00078     \}
00079     \textcolor{keywordflow}{return} QVariantList();
00080 \}
\end{DoxyCode}
