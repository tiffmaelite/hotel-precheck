\hypertarget{SH__DatabaseManager_8h}{\section{S\-H\-\_\-\-Database\-Manager.\-h}
\label{SH__DatabaseManager_8h}\index{/home/tiff/\-Stage-\/\-I\-U\-T/app/simplhotel/hotel-\/precheck/src/\-Pre\-Check/\-S\-H\-\_\-\-Database\-Manager.\-h@{/home/tiff/\-Stage-\/\-I\-U\-T/app/simplhotel/hotel-\/precheck/src/\-Pre\-Check/\-S\-H\-\_\-\-Database\-Manager.\-h}}
}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#ifndef SH\_DatabaseManagerSINGLETON\_H}
00002 \textcolor{preprocessor}{}\textcolor{preprocessor}{#define SH\_DatabaseManagerSINGLETON\_H}
00003 \textcolor{preprocessor}{}\textcolor{preprocessor}{#include <QSqlDatabase>}
00004 \textcolor{preprocessor}{#include <QString>}
00005 \textcolor{preprocessor}{#include <QSqlQuery>}
00006 \textcolor{preprocessor}{#include <QObject>}
00007 \textcolor{preprocessor}{#include <QtCore>}
00008 \textcolor{comment}{/*namespace SimplHotel}
00009 \textcolor{comment}{\{*/}
00010 \textcolor{comment}{/* declare DB driver and filename.}
00011 \textcolor{comment}{ */}
\hypertarget{SH__DatabaseManager_8h_source_l00015}{}\hyperlink{SH__DatabaseManager_8h_a867ada6d1926e2ded0e68678e02a19c7}{00015} \textcolor{keyword}{static} \textcolor{keyword}{const} QString \hyperlink{SH__DatabaseManager_8h_a867ada6d1926e2ded0e68678e02a19c7}{dbDriverStr} = \textcolor{stringliteral}{"QIBASE"};
\hypertarget{SH__DatabaseManager_8h_source_l00019}{}\hyperlink{SH__DatabaseManager_8h_a6c6a636455d1d86d7215a52de4bc6828}{00019} \textcolor{keyword}{static} \textcolor{keyword}{const} QString \hyperlink{SH__DatabaseManager_8h_a6c6a636455d1d86d7215a52de4bc6828}{dbFileNameStr} = \textcolor{stringliteral}{"PreCheckDB.fdb"};
\hypertarget{SH__DatabaseManager_8h_source_l00023}{}\hyperlink{SH__DatabaseManager_8h_a6ea3da6c82e06907039cdf906ae15fd1}{00023} \textcolor{keyword}{static} \textcolor{keyword}{const} QString \hyperlink{SH__DatabaseManager_8h_a6ea3da6c82e06907039cdf906ae15fd1}{dbAliasNameStr} = \textcolor{stringliteral}{"precheck-hotel"};
\hypertarget{SH__DatabaseManager_8h_source_l00027}{}\hyperlink{SH__DatabaseManager_8h_a15964752bd7d7c2075f3bafca2218411}{00027} \textcolor{keyword}{static} \textcolor{keyword}{const} QString \hyperlink{SH__DatabaseManager_8h_a15964752bd7d7c2075f3bafca2218411}{dbUsernameStr} = \textcolor{stringliteral}{"SYSDBA"};
\hypertarget{SH__DatabaseManager_8h_source_l00031}{}\hyperlink{SH__DatabaseManager_8h_a5dbd4602b69f5a87243d49f9c873ac64}{00031} \textcolor{keyword}{static} \textcolor{keyword}{const} QString \hyperlink{SH__DatabaseManager_8h_a5dbd4602b69f5a87243d49f9c873ac64}{dbPasswordStr} = \textcolor{stringliteral}{"masterkey"};
00032 
\hypertarget{SH__DatabaseManager_8h_source_l00036}{}\hyperlink{SH__DatabaseManager_8h_a74e17c2ab66452c74a37bdc0f32e9e08}{00036} \textcolor{keyword}{static} \textcolor{keyword}{const} QString \hyperlink{SH__DatabaseManager_8h_a74e17c2ab66452c74a37bdc0f32e9e08}{dbFolderPathStr} = QDir::cleanPath(QDir::currentPath()+\textcolor{stringliteral}{"
      /../../../src/Database/"});
\hypertarget{SH__DatabaseManager_8h_source_l00040}{}\hyperlink{SH__DatabaseManager_8h_acee79beb6e5aec996fd46b84264d072a}{00040} \textcolor{keyword}{static} \textcolor{keyword}{const} QString \hyperlink{SH__DatabaseManager_8h_acee79beb6e5aec996fd46b84264d072a}{dbFilePathStr} = QString(\textcolor{stringliteral}{"%1/%2"}).arg(
      \hyperlink{SH__DatabaseManager_8h_a74e17c2ab66452c74a37bdc0f32e9e08}{dbFolderPathStr}).arg(\hyperlink{SH__DatabaseManager_8h_a6c6a636455d1d86d7215a52de4bc6828}{dbFileNameStr});
00041 
00042 
00043 \textcolor{comment}{/* GUI string messages.}
00044 \textcolor{comment}{ */}
\hypertarget{SH__DatabaseManager_8h_source_l00048}{}\hyperlink{SH__DatabaseManager_8h_adeeb3449586b533bdd3cd5938d501807}{00048} \textcolor{keyword}{static} QString \hyperlink{SH__DatabaseManager_8h_adeeb3449586b533bdd3cd5938d501807}{dbDriverNotExistStr} = QObject::tr(\textcolor{stringliteral}{"%1 database driver is not available."})
      .arg(\hyperlink{SH__DatabaseManager_8h_a867ada6d1926e2ded0e68678e02a19c7}{dbDriverStr});
\hypertarget{SH__DatabaseManager_8h_source_l00052}{}\hyperlink{SH__DatabaseManager_8h_a19d48066a97c8a9a81827ccf23fd736f}{00052} \textcolor{keyword}{static} QString \hyperlink{SH__DatabaseManager_8h_a19d48066a97c8a9a81827ccf23fd736f}{dbCannotOpenStr} = QObject::tr(\textcolor{stringliteral}{"The database %1 cannot be opened."}).arg(
      dbFilePathStr);
00053 
00054 
00055 
\hypertarget{SH__DatabaseManager_8h_source_l00061}{}\hyperlink{classSH__DatabaseManager}{00061} \textcolor{keyword}{class }\hyperlink{classSH__DatabaseManager}{SH\_DatabaseManager}: \textcolor{keyword}{public} \hyperlink{classQObject}{QObject}
00062 \{
00063     Q\_OBJECT
00064 \textcolor{keyword}{private}:
00065 
\hypertarget{SH__DatabaseManager_8h_source_l00069}{}\hyperlink{classSH__DatabaseManager_a8ca37d0cafa6a181582d60e045a8d5ab}{00069}     \textcolor{keyword}{static} \hyperlink{classSH__DatabaseManager}{SH\_DatabaseManager} *\hyperlink{classSH__DatabaseManager_a8ca37d0cafa6a181582d60e045a8d5ab}{\_instance};
00070 
00071 
00079     \textcolor{keywordtype}{void} \hyperlink{classSH__DatabaseManager_a4562e0c0027c0adbba645edc433f7fd1}{divideQVariantMap}(QVariantMap values, QString &fields, QString &vals);
00080 \textcolor{keyword}{protected}:
00081 
00086     \hyperlink{classSH__DatabaseManager_a7b5d0e372c153eb59cdab98588994904}{SH\_DatabaseManager}();
00087 
00088 
\hypertarget{SH__DatabaseManager_8h_source_l00092}{}\hyperlink{classSH__DatabaseManager_a9291f61c3abbba2c4f1567b1d8325f0e}{00092}     QSqlDatabase \hyperlink{classSH__DatabaseManager_a9291f61c3abbba2c4f1567b1d8325f0e}{dbConnection};
00093 
00094 \textcolor{keyword}{public}:
00095 
00096 
00097 
00103     \textcolor{keyword}{static} \hyperlink{classSH__DatabaseManager}{SH\_DatabaseManager} *\hyperlink{classSH__DatabaseManager_a31198eb4de0f8b18e3fa0eed09f24d19}{getInstance}();
00104 
00105 
00106 
00107 
00113     \textcolor{keywordtype}{bool} \hyperlink{classSH__DatabaseManager_ab634ce39ef483e7ad2fe08d4b8ba74f7}{dbConnect}();
00114 
00115 
00121     \textcolor{keywordtype}{bool} \hyperlink{classSH__DatabaseManager_aba5832c8be2fe4894781c9bf34be5b8b}{isConnected}();
00122 
00123 
00124 
00130     \textcolor{keywordtype}{bool} \hyperlink{classSH__DatabaseManager_a096c26457bbb03f92283c5d104401e90}{dbDisconnect}();
00131 
00132 
00133 
00139     QSqlDatabase \hyperlink{classSH__DatabaseManager_a0ce86f671946975c2e7b4ad50c9a92a2}{getDbConnection}();
00140 
00141 
00142 
00147     \hyperlink{classSH__DatabaseManager_ad899140e4638301b6a6ed68a3289b34b}{~SH\_DatabaseManager}();
00148 
00149 
00156     \textcolor{keywordtype}{bool} \hyperlink{classSH__DatabaseManager_ac18f4ee3abd86cb0db25b3cb593e28b8}{tableExists}(QString tableName);
00157 
00158 
00166     \textcolor{keywordtype}{int} \hyperlink{classSH__DatabaseManager_ad3e372d89b60b43e3f3bae649be6d7fb}{dataCount}(QString tableName, QString filter);
00167 
00168 
00175     QSqlQuery \hyperlink{classSH__DatabaseManager_ab8f9850cb68444ab9a4e613b36a3b044}{execSelectQuery}(QString tableName, QStringList fields=QStringList(\textcolor{stringliteral}{"*"}), 
      QString condition=\textcolor{stringliteral}{""}, QString ordering=\textcolor{stringliteral}{""});
00176 
00177 
00184     \textcolor{keywordtype}{bool} \hyperlink{classSH__DatabaseManager_a25e0f24d7833c2728f55b85be529063d}{execReplaceQuery}(QString tableName, QVariantMap values);
00185 
00186 
00194     QVariant \hyperlink{classSH__DatabaseManager_a55268fae16792142072af49238f7bb94}{execInsertReturningQuery}(QString tableName, QVariantMap values, 
      QString returningField);
00195 \};
00196 \textcolor{comment}{/*\}*/}
00197 \textcolor{preprocessor}{#endif }\textcolor{comment}{/* SH\_DatabaseManagerSINGLETON\_H*/}\textcolor{preprocessor}{}
\end{DoxyCode}
