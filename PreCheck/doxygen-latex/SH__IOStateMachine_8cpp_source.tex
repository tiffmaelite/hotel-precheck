\hypertarget{SH__IOStateMachine_8cpp}{\section{S\-H\-\_\-\-I\-O\-State\-Machine.\-cpp}
\label{SH__IOStateMachine_8cpp}\index{/home/tiff/\-Stage-\/\-I\-U\-T/app/simplhotel/hotel-\/precheck/src/\-Pre\-Check/logic/\-S\-H\-\_\-\-I\-O\-State\-Machine.\-cpp@{/home/tiff/\-Stage-\/\-I\-U\-T/app/simplhotel/hotel-\/precheck/src/\-Pre\-Check/logic/\-S\-H\-\_\-\-I\-O\-State\-Machine.\-cpp}}
}

\begin{DoxyCode}
00001 \textcolor{preprocessor}{#include "\hyperlink{SH__IOStateMachine_8h}{SH\_IOStateMachine.h}"}
00002 \textcolor{preprocessor}{#include "\hyperlink{SH__ValidationState_8h}{SH\_ValidationState.h}"}
00003 \textcolor{preprocessor}{#include "\hyperlink{SH__ConfirmationState_8h}{SH\_ConfirmationState.h}"}
00004 \textcolor{preprocessor}{#include "\hyperlink{SH__FileSelectionState_8h}{SH\_FileSelectionState.h}"}
00005 \textcolor{preprocessor}{#include "\hyperlink{SH__DateQuestionState_8h}{SH\_DateQuestionState.h}"}
00006 \textcolor{preprocessor}{#include "\hyperlink{SH__AdaptDatabaseState_8h}{SH\_AdaptDatabaseState.h}"}
00007 
\hypertarget{SH__IOStateMachine_8cpp_source_l00013}{}\hyperlink{classSH__InOutStateMachine_abd780037922920c674b43d80c2b50d16}{00013} \hyperlink{classSH__InOutStateMachine_abd780037922920c674b43d80c2b50d16}{SH\_InOutStateMachine::SH\_InOutStateMachine}(QString tableName, 
      QString name, \hyperlink{classQObject}{QObject} *parent) :
00014     \hyperlink{classSH__GenericStateMachine}{SH\_GenericStateMachine}(name, parent), m\_tableName(tableName)
00015 \{
00016     qDebug() << \textcolor{stringliteral}{"nouvelle IOStateMachine"};
00017 \}
00018 
00019 
00020 
\hypertarget{SH__IOStateMachine_8cpp_source_l00027}{}\hyperlink{classSH__InOutStateMachine_aaca105fbd5f5cc3bac115389ad3694c5}{00027} QVariantMap \hyperlink{classSH__InOutStateMachine_aaca105fbd5f5cc3bac115389ad3694c5}{SH\_InOutStateMachine::ioContent}()\textcolor{keyword}{ const}
00028 \textcolor{keyword}{}\{
00029     \textcolor{keywordflow}{return} \hyperlink{classSH__InOutStateMachine_a8cfbc27eef057bf37b7711bdfef2077e}{m\_ioContent};
00030 \}
00031 
\hypertarget{SH__IOStateMachine_8cpp_source_l00038}{}\hyperlink{classSH__InOutStateMachine_a8271a7ec7d5f6502449dd3b4da5f4155}{00038} \textcolor{keywordtype}{void} \hyperlink{classSH__InOutStateMachine_a8271a7ec7d5f6502449dd3b4da5f4155}{SH\_InOutStateMachine::setIOcontent}(\textcolor{keyword}{const} QVariantMap &ioContent)
00039 \{
00040     \hyperlink{classSH__InOutStateMachine_a8cfbc27eef057bf37b7711bdfef2077e}{m\_ioContent} = \hyperlink{classSH__InOutStateMachine_aaca105fbd5f5cc3bac115389ad3694c5}{ioContent};
00041 \}
00042 
\hypertarget{SH__IOStateMachine_8cpp_source_l00049}{}\hyperlink{classSH__InOutStateMachine_aa1a3bd3c0ea8a59b9bc916dc718eb9ca}{00049} QVariant \hyperlink{classSH__InOutStateMachine_aa1a3bd3c0ea8a59b9bc916dc718eb9ca}{SH\_InOutStateMachine::getContentValue}(QString field)
00050 \{
00051     \textcolor{keywordflow}{return} \hyperlink{classSH__InOutStateMachine_a8cfbc27eef057bf37b7711bdfef2077e}{m\_ioContent}.value(field);
00052 \}
00053 
\hypertarget{SH__IOStateMachine_8cpp_source_l00060}{}\hyperlink{classSH__InOutStateMachine_a4288a6c86ddf83effefff886675591c9}{00060} QString \hyperlink{classSH__InOutStateMachine_a4288a6c86ddf83effefff886675591c9}{SH\_InOutStateMachine::tableName}()\textcolor{keyword}{ const}
00061 \textcolor{keyword}{}\{
00062     \textcolor{keywordflow}{return} \hyperlink{classSH__InOutStateMachine_aa009eecc5ab6181358faafb5996b6006}{m\_tableName};
00063 \}
00064 
\hypertarget{SH__IOStateMachine_8cpp_source_l00071}{}\hyperlink{classSH__InOutStateMachine_a95db31a7e7f31f36a8737adc739ab08c}{00071} \textcolor{keywordtype}{void} \hyperlink{classSH__InOutStateMachine_a95db31a7e7f31f36a8737adc739ab08c}{SH\_InOutStateMachine::setTableName}(\textcolor{keyword}{const} QString &tableName)
00072 \{
00073     \hyperlink{classSH__InOutStateMachine_aa009eecc5ab6181358faafb5996b6006}{m\_tableName} = \hyperlink{classSH__InOutStateMachine_a4288a6c86ddf83effefff886675591c9}{tableName};
00074 \}
00075 
00076 
\hypertarget{SH__IOStateMachine_8cpp_source_l00083}{}\hyperlink{classSH__InOutStateMachine_a9ab1534306b2bdb62743d4bcefe40c17}{00083} \textcolor{keywordtype}{void} \hyperlink{classSH__InOutStateMachine_a9ab1534306b2bdb62743d4bcefe40c17}{SH\_InOutStateMachine::setContentValue}(QVariant content, QString 
      field)
00084 \{
00085     \hyperlink{classSH__InOutStateMachine_a8cfbc27eef057bf37b7711bdfef2077e}{m\_ioContent}.insert(field, content);
00086 \}
00087 
\hypertarget{SH__IOStateMachine_8cpp_source_l00094}{}\hyperlink{classSH__InOutStateMachine_a2528cffddbe6f98c32ebef41423c0118}{00094} \textcolor{keywordtype}{void} \hyperlink{classSH__InOutStateMachine_a2528cffddbe6f98c32ebef41423c0118}{SH\_InOutStateMachine::addIOState}(
      \hyperlink{classSH__InOutState}{SH\_InOutState} *state, QString field)
00095 \{
00096     \textcolor{comment}{/*à faire au moment de l'entrée dans l'état state*/}
00097     connect(state, &QState::entered, [=]() \{
00098         qDebug() << state->\hyperlink{classSH__GenericState_a7779babbb40f3f8faa71112204d9804f}{toString}() << \textcolor{stringliteral}{"entered !"};
00099         state->\hyperlink{classSH__InOutState_a616f88b20478b81b2927a9ddc2b4f521}{display}(\textcolor{keyword}{true});
00100         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_a037ed5e13ecfae2123a8d4940292e410}{SH\_InOutStateMachine::receiveInput}, state, &
      \hyperlink{classSH__InOutState_aaec9c2b5ef7c406bff7469461352d47c}{SH\_InOutState::setInput}, Qt::QueuedConnection); \textcolor{comment}{/* la réception d'une valeur
       entraîne son enregistrement comme entrée de l'utilisateur auprès de l'état*/}
00101         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_a037ed5e13ecfae2123a8d4940292e410}{SH\_InOutStateMachine::receiveInput}, [=](QString in
      )\{ qDebug() << state->\hyperlink{classSH__GenericState_a7779babbb40f3f8faa71112204d9804f}{toString}() << \textcolor{stringliteral}{"hello world !"}; state->\hyperlink{classSH__InOutState_aaec9c2b5ef7c406bff7469461352d47c}{setInput}(in);\}); \textcolor{comment}{/* la réception
       d'une valeur entraîne son enregistrement comme entrée de l'utilisateur auprès de l'état*/}
00102         connect(state, &\hyperlink{classSH__InOutState_af611c84134e262739cd834797b315c80}{SH\_InOutState::setOutput}, [=](QVariant out) \{qDebug() << 
      state->\hyperlink{classSH__GenericState_a7779babbb40f3f8faa71112204d9804f}{toString}() << \textcolor{stringliteral}{"out !"};\});
00103         connect(state, &\hyperlink{classSH__InOutState_a77921c5f42059bc97361f4ff7827da12}{SH\_InOutState::sendOutput}, [=](QVariant out) \{qDebug() << 
      state->\hyperlink{classSH__GenericState_a7779babbb40f3f8faa71112204d9804f}{toString}() << \textcolor{stringliteral}{"connected !"}; emit this->\hyperlink{classSH__InOutStateMachine_a5e7f5958bae31696b6a8deab94ad2b4f}{sendText}(out.toString(), \textcolor{keyword}{false});\});
00104         connect(state, &\hyperlink{classSH__InOutState_a1f00480afefd173002cf56d4c4128048}{SH\_InOutState::resendInput}, [=](QVariant in) \{emit this->
      \hyperlink{classSH__InOutStateMachine_a526822c66b46aa0cd81ba4473fa5573f}{resendText}(in.toString(), \textcolor{keyword}{true});\});
00105         \textcolor{keywordflow}{if}(state->\hyperlink{classSH__InOutState_a3a18752c4122c26a2ebf38310c9c1b75}{visibility}()) \{
00106             state->\hyperlink{classSH__InOutState_a77921c5f42059bc97361f4ff7827da12}{sendOutput}(QVariant(state->\hyperlink{classSH__InOutState_a17ed7eaf5e3ed5af80a4f9fe65d5bfd9}{output}()));
00107         \} \textcolor{keywordflow}{else} \{
00108             qDebug() << \textcolor{stringliteral}{"invisible"};
00109         \}
00110     \});
00111     \hyperlink{classSH__ValidationState}{SH\_ValidationState} *validationState = qobject\_cast<
      \hyperlink{classSH__ValidationState}{SH\_ValidationState}*>(state);
00112     \textcolor{keywordflow}{if}(validationState) \{
00113         \textcolor{comment}{/*à faire au moment de l'entrée dans l'état state*/}
00114         connect(validationState, &QState::entered, [=]() \{
00115             connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_aec1b3fef3c1f82499aa1f73beaecd08a}{SH\_InOutStateMachine::validateInput}, 
      validationState, &\hyperlink{classSH__ConfirmationState_a039267260de5d102ac7511e6a5fae87f}{SH\_ValidationState::confirmInput}, Qt::QueuedConnection);
00116         \});
00117     \}
00118     \hyperlink{classSH__ConfirmationState}{SH\_ConfirmationState} *confirmationState = qobject\_cast<
      \hyperlink{classSH__ConfirmationState}{SH\_ConfirmationState}*>(state);
00119     \textcolor{keywordflow}{if}(confirmationState) \{
00120         \textcolor{comment}{/*à faire au moment de l'entrée dans l'état state*/}
00121         connect(confirmationState, &QState::entered, [=]() \{
00122             connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_aec1b3fef3c1f82499aa1f73beaecd08a}{SH\_InOutStateMachine::validateInput}, 
      confirmationState, &\hyperlink{classSH__ConfirmationState_a039267260de5d102ac7511e6a5fae87f}{SH\_ConfirmationState::confirmInput}, Qt::QueuedConnection);
00123         \});
00124     \}
00125     \hyperlink{classSH__DateQuestionState}{SH\_DateQuestionState} *dateState = qobject\_cast<
      \hyperlink{classSH__DateQuestionState}{SH\_DateQuestionState}*>(state);
00126     \textcolor{keywordflow}{if}(dateState) \{
00127         \textcolor{comment}{/*à faire au moment de l'entrée dans l'état state*/}
00128         connect(dateState, &QState::entered, \textcolor{keyword}{this}, &
      \hyperlink{classSH__InOutStateMachine_ab3a12d1f9b658d8ffdc17669a6c065f2}{SH\_InOutStateMachine::displayCalendar}, Qt::QueuedConnection);
00129     \}
00130     \hyperlink{classSH__FileSelectionState}{SH\_FileSelectionState} *fileState = qobject\_cast<
      \hyperlink{classSH__FileSelectionState}{SH\_FileSelectionState}*>(state);
00131     \textcolor{keywordflow}{if}(fileState) \{
00132         \textcolor{comment}{/*à faire au moment de l'entrée dans l'état state*/}
00133         connect(fileState, &QState::entered, \textcolor{keyword}{this}, &
      \hyperlink{classSH__InOutStateMachine_abd206c3bc32bb7690df9c3e1cd546ebc}{SH\_InOutStateMachine::displayFileDialog}, Qt::QueuedConnection);
00134     \}
00135     \textcolor{comment}{/*à faire au moment de la sortie de l'état state*/}
00136     connect(state, &QState::exited, [=]() \{
00137         qDebug() << \textcolor{stringliteral}{"exited !"};
00138         \textcolor{keywordflow}{if}(!field.isEmpty()) \{
00139             \hyperlink{classSH__InOutStateMachine_a9ab1534306b2bdb62743d4bcefe40c17}{setContentValue}(state->\hyperlink{classSH__InOutState_a4c674a54f41d2e6ef951b22393dcd89f}{rawInput}(), field);
00140             \textcolor{comment}{/*gestion de l'historique des états pour pouvoir revenir à l'état state après l'avoir quitté*/}
00141             QHistoryState* hState = \textcolor{keyword}{new} QHistoryState(state);
00142             \hyperlink{classSH__InOutStateMachine_acbcce2c4300af1634d928b30e5e9be1c}{setIOStateHistory}(hState, field);
00143         \}
00144         state->disconnect(\textcolor{keyword}{this}); \textcolor{comment}{/*plus aucune action sur l'état ne pourra être provoquée par la machine*/}
00145     \});
00146 
00147 
00148     QAbstractState* astate = qobject\_cast<QAbstractState *>(state);
00149     \textcolor{keywordflow}{if}(astate) \{
00150         addState(astate);
00151     \}
00152 \}
00153 
\hypertarget{SH__IOStateMachine_8cpp_source_l00160}{}\hyperlink{classSH__InOutStateMachine_a6f65dff277508e650eb697628c857b19}{00160} \textcolor{keywordtype}{void} \hyperlink{classSH__InOutStateMachine_a6f65dff277508e650eb697628c857b19}{SH\_InOutStateMachine::addIOStateMachine}(
      \hyperlink{classSH__InOutStateMachine}{SH\_InOutStateMachine} *fsm)
00161 \{
00162     \textcolor{comment}{/*à faire au moment de l'entrée dans la machine d'état fsm*/}
00163     connect(fsm, &QState::entered, [=]() \{
00164         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_a037ed5e13ecfae2123a8d4940292e410}{SH\_InOutStateMachine::receiveInput}, fsm, &
      \hyperlink{classSH__InOutStateMachine_a037ed5e13ecfae2123a8d4940292e410}{SH\_InOutStateMachine::receiveInput},Qt::QueuedConnection);
00165         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_a5e7f5958bae31696b6a8deab94ad2b4f}{SH\_InOutStateMachine::sendText}, fsm, &
      \hyperlink{classSH__InOutStateMachine_a5e7f5958bae31696b6a8deab94ad2b4f}{SH\_InOutStateMachine::sendText},Qt::QueuedConnection);
00166         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_a526822c66b46aa0cd81ba4473fa5573f}{SH\_InOutStateMachine::resendText}, fsm, &
      \hyperlink{classSH__InOutStateMachine_a526822c66b46aa0cd81ba4473fa5573f}{SH\_InOutStateMachine::resendText},Qt::QueuedConnection);
00167         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_a7f7d9c9300c1d05bce2c26029f28cc31}{SH\_InOutStateMachine::confirmInput}, fsm, &
      \hyperlink{classSH__InOutStateMachine_a7f7d9c9300c1d05bce2c26029f28cc31}{SH\_InOutStateMachine::confirmInput},Qt::QueuedConnection);
00168         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_aec1b3fef3c1f82499aa1f73beaecd08a}{SH\_InOutStateMachine::validateInput}, fsm, &
      \hyperlink{classSH__InOutStateMachine_aec1b3fef3c1f82499aa1f73beaecd08a}{SH\_InOutStateMachine::validateInput},Qt::QueuedConnection);
00169         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_a9fa5db44086de2576c812f631aa4f60a}{SH\_InOutStateMachine::replaceInput}, fsm, &
      \hyperlink{classSH__InOutStateMachine_a9fa5db44086de2576c812f631aa4f60a}{SH\_InOutStateMachine::replaceInput},Qt::QueuedConnection);
00170         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_a035d37535533d4805fe2606f38c19380}{SH\_InOutStateMachine::cancelReplacement}, fsm,
       &\hyperlink{classSH__InOutStateMachine_a035d37535533d4805fe2606f38c19380}{SH\_InOutStateMachine::cancelReplacement},Qt::QueuedConnection);
00171         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_ab3a12d1f9b658d8ffdc17669a6c065f2}{SH\_InOutStateMachine::displayCalendar}, fsm, &
      \hyperlink{classSH__InOutStateMachine_ab3a12d1f9b658d8ffdc17669a6c065f2}{SH\_InOutStateMachine::displayCalendar},Qt::QueuedConnection);
00172     \});
00173     \textcolor{comment}{/*à faire au moment de la sortie de la machine d'état fsm*/}
00174     connect(fsm, &QState::exited, [=]() \{
00175         fsm->disconnect(\textcolor{keyword}{this}); \textcolor{comment}{/*plus aucune action sur la machine d'état fille ne pourra être provoquée
       par la machine mère*/}
00176     \});
00177 
00178 \}
00179 
00180 
\hypertarget{SH__IOStateMachine_8cpp_source_l00187}{}\hyperlink{classSH__InOutStateMachine_a13889998c6dcd17db984dd6ed1454e80}{00187} QMap<QString, QHistoryState *> \hyperlink{classSH__InOutStateMachine_a13889998c6dcd17db984dd6ed1454e80}{SH\_InOutStateMachine::ioStatesHistory}()\textcolor{keyword}{
       const}
00188 \textcolor{keyword}{}\{
00189     \textcolor{keywordflow}{return} \hyperlink{classSH__InOutStateMachine_ac46ad1af230e1b2156d805275690dec3}{m\_ioStatesHistory};
00190 \}
00191 
00192 
\hypertarget{SH__IOStateMachine_8cpp_source_l00199}{}\hyperlink{classSH__InOutStateMachine_af51f92c37d00a4eec4da42113cfd7d73}{00199} \textcolor{keywordtype}{void} \hyperlink{classSH__InOutStateMachine_af51f92c37d00a4eec4da42113cfd7d73}{SH\_InOutStateMachine::setIOStatesHistory}(\textcolor{keyword}{const} QMap<QString,
       QHistoryState *> &ioStatesHistory)
00200 \{
00201     \hyperlink{classSH__InOutStateMachine_ac46ad1af230e1b2156d805275690dec3}{m\_ioStatesHistory} = \hyperlink{classSH__InOutStateMachine_a13889998c6dcd17db984dd6ed1454e80}{ioStatesHistory};
00202 \}
00203 
00204 
\hypertarget{SH__IOStateMachine_8cpp_source_l00211}{}\hyperlink{classSH__InOutStateMachine_acbcce2c4300af1634d928b30e5e9be1c}{00211} \textcolor{keywordtype}{void} \hyperlink{classSH__InOutStateMachine_acbcce2c4300af1634d928b30e5e9be1c}{SH\_InOutStateMachine::setIOStateHistory}(QHistoryState *state, 
      QString field)
00212 \{
00213     \hyperlink{classSH__InOutStateMachine_ac46ad1af230e1b2156d805275690dec3}{m\_ioStatesHistory}.insert(field, state); \textcolor{comment}{/*remplacement si plusieurs fois*/}
00214 \}
00215 
00216 
\hypertarget{SH__IOStateMachine_8cpp_source_l00223}{}\hyperlink{classSH__InOutStateMachine_af71bfdb3b59b7bf2763588b513b4205f}{00223} QHistoryState *\hyperlink{classSH__InOutStateMachine_af71bfdb3b59b7bf2763588b513b4205f}{SH\_InOutStateMachine::historyValue}(QString field)
00224 \{
00225     \textcolor{keywordflow}{return} \hyperlink{classSH__InOutStateMachine_ac46ad1af230e1b2156d805275690dec3}{m\_ioStatesHistory}.value(field);
00226 \}
00227 
00228 
00229 
\hypertarget{SH__IOStateMachine_8cpp_source_l00236}{}\hyperlink{classSH__InOutStateMachine_ae0f3b4622d2c70884bb224dee86e95c0}{00236} \textcolor{keywordtype}{void} \hyperlink{classSH__InOutStateMachine_ae0f3b4622d2c70884bb224dee86e95c0}{SH\_InOutStateMachine::addChildrenReplaceTransition}(
      QAbstractState *previousState, QAbstractState *nextState)
00237 \{
00238         \hyperlink{classSH__GenericState}{SH\_GenericState}* genPreviousState = qobject\_cast<
      \hyperlink{classSH__GenericState}{SH\_GenericState}*>(previousState);
00239     \textcolor{keywordflow}{if}(genPreviousState) \{
00240         \textcolor{comment}{/*à faire au moment de l'entrée dans l'état previousState*/}
00241         connect(\textcolor{keyword}{this}, &\hyperlink{classSH__InOutStateMachine_a9fa5db44086de2576c812f631aa4f60a}{SH\_InOutStateMachine::replaceInput}, [=](QString 
      field) \{
00242             \textcolor{keywordflow}{if}(genPreviousState->\hyperlink{classSH__GenericState_a5f731810dad0cacd28828ccbf1539e4e}{isRunning}()) \{
00243                 \textcolor{comment}{/*après avoir demandé à revenir sur un état précédent, on attend la fin de l'état actuel
       puis on retourne à l'historique de l'état désiré; celui-ci fini, on passe à l'état qui aurait du suivre celui
       pendant lequel on a demandé à revenir sur un état précédent*/}
00244                 QHistoryState* hState = \hyperlink{classSH__InOutStateMachine_af71bfdb3b59b7bf2763588b513b4205f}{historyValue}(field);
00245                 \textcolor{keywordflow}{if}(hState) \{ \textcolor{comment}{/*si l'historique existe (on a déjà quitté l'état voulu)*/}
00246                     hState->parentState()->addTransition(hState->parentState(), SIGNAL(
      \hyperlink{classSH__GenericStateMachine_af4771d31d87951c997fba1633c2d67f6}{next}()), nextState);
00247                     genPreviousState->addTransition(genPreviousState, SIGNAL(
      \hyperlink{classSH__GenericStateMachine_af4771d31d87951c997fba1633c2d67f6}{next}()), hState);
00248                 \}
00249             \}
00250         \});
00251     \}
00252 \}
00253 
\hypertarget{SH__IOStateMachine_8cpp_source_l00260}{}\hyperlink{classSH__InOutStateMachine_aa78420f8778d7777809aad77eb8473b4}{00260} \textcolor{keywordtype}{void} \hyperlink{classSH__InOutStateMachine_aa78420f8778d7777809aad77eb8473b4}{SH\_InOutStateMachine::addChildrenNextTransition}(
      QAbstractState *previousState, QAbstractState *nextState)
00261 \{
00262     \hyperlink{classSH__GenericStateMachine}{SH\_GenericStateMachine}* fsmPreviousState = qobject\_cast<
      \hyperlink{classSH__GenericStateMachine}{SH\_GenericStateMachine}*>(previousState);
00263     \hyperlink{classSH__GenericState}{SH\_GenericState}* genPreviousState = qobject\_cast<
      \hyperlink{classSH__GenericState}{SH\_GenericState}*>(previousState);
00264     QFinalState* \textcolor{keyword}{final} = qobject\_cast<QFinalState*>(nextState);
00265     \textcolor{keywordflow}{if}(\textcolor{keyword}{final}) \{
00266         \hyperlink{classSH__AdaptDatabaseState}{SH\_AdaptDatabaseState}* saveState = \textcolor{keyword}{new} 
      \hyperlink{classSH__AdaptDatabaseState}{SH\_AdaptDatabaseState}(\textcolor{stringliteral}{"enregistrement de la machine "}+
      \hyperlink{classSH__GenericStateMachine_a85c0c1c9d258ae991f84667412fa47cd}{toString}());
00267         \textcolor{keywordflow}{if}(genPreviousState) \{
00268             genPreviousState->addTransition(genPreviousState, SIGNAL(\hyperlink{classSH__GenericStateMachine_af4771d31d87951c997fba1633c2d67f6}{next}()), saveState);
00269         \}
00270         \textcolor{keywordflow}{if}(fsmPreviousState) \{
00271             fsmPreviousState->addTransition(fsmPreviousState, SIGNAL(\hyperlink{classSH__GenericStateMachine_af4771d31d87951c997fba1633c2d67f6}{next}()), saveState);
00272         \}
00273         \textcolor{keywordflow}{if}(genPreviousState || fsmPreviousState) \{
00274             connect(previousState, &QAbstractState::exited, [=]() \{
00275                 connect(saveState, &QAbstractState::entered, [=]() \{
00276                     emit this->\hyperlink{classSH__InOutStateMachine_a5e7f5958bae31696b6a8deab94ad2b4f}{sendText}(\textcolor{stringliteral}{"Merci !"});
00277                     \hyperlink{classSH__InOutStateMachine_a9ab1534306b2bdb62743d4bcefe40c17}{setContentValue}(saveState->\hyperlink{classSH__AdaptDatabaseState_a037db544ea05f42d21fcbdda758839fe}{insertUpdate}(
      \hyperlink{classSH__InOutStateMachine_aa009eecc5ab6181358faafb5996b6006}{m\_tableName}, \hyperlink{classSH__InOutStateMachine_a8cfbc27eef057bf37b7711bdfef2077e}{m\_ioContent}), \textcolor{stringliteral}{"ID"});
00278                     emit this->\hyperlink{classSH__InOutStateMachine_aa1d5860888c96ff94c55dc77e0fdfdcf}{clearAll}();
00279                 \});
00280             \});
00281             saveState->addTransition(saveState, SIGNAL(\hyperlink{classSH__GenericStateMachine_af4771d31d87951c997fba1633c2d67f6}{next}()),\textcolor{keyword}{final});
00282         \}
00283     \}
00284     \hyperlink{classSH__GenericStateMachine_a22433f8df2f41120a05bfa4bbfa9e0ae}{SH\_GenericStateMachine::addChildrenNextTransition}(
      previousState, nextState);
00285 \}
00286 
00287 
\end{DoxyCode}
